<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eleven Squad Builder</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    padding: 20px;
}
.role-label {
    font-size: 11px;
    font-weight: bold;
    text-transform: uppercase;
    color: #fff;
    opacity: 0.8;
    margin-bottom: 2px;
}
.coach-display,
.goat-display {
    flex-direction: column;
    align-items: center;
    text-align: center;
}




.container { max-width: 1200px; margin: 0 auto; }
header { text-align: center; color: white; margin-bottom: 30px; }
h1 { font-size: 2.5em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); margin-bottom: 10px; }

.tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
.tab {
    background: rgba(255,255,255,0.2); color: white; border: none; padding: 12px 24px;
    border-radius: 25px; cursor: pointer; font-size: 16px; transition: all 0.3s;
}
.tab.active { background: white; color: #667eea; font-weight: bold; }
.tab:hover { transform: translateY(-2px); }
.tab-link { text-decoration: none; }

.content { display: none; }
.content.active { display: block; }

.controls {
    background: rgba(255,255,255,0.95); padding: 20px; border-radius: 15px;
    margin-bottom: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.1);
}
.control-group {
    display: flex; gap: 15px; align-items: center; flex-wrap: wrap; justify-content: center;
}
.control-group label { font-weight: bold; color: #333; }
.control-group select, .control-group input {
    padding: 10px 15px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; outline: none;
}
.control-group select:focus, .control-group input:focus { border-color: #667eea; }

.btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;
    border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer;
    font-size: 16px; font-weight: bold; transition: all 0.3s;
}
.btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
.btn-success { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
.btn-secondary { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
.btn-goat { background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); color: #000; }

.team-name-display {
    position: absolute; top: 15px; left: 50%; transform: translateX(-50%);
    font-size: 22px; font-weight: bold; color: #fff; padding: 6px 12px;
    background: rgba(0,0,0,0.45); border-radius: 12px; backdrop-filter: blur(4px); z-index: 10;
}

#field {
    position: relative; background: linear-gradient(180deg, #2d5016 0%, #1a3a0f 100%);
    border-radius: 20px; padding: 50px 20px 80px; box-shadow: 0 15px 50px rgba(0,0,0,0.3); min-height: 650px;
}
#field::before { content: ''; position: absolute; top: 50%; left: 5%; right: 5%; height: 2px; background: rgba(255,255,255,0.3); }
#field::after { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);
    width: 120px; height: 120px; border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; }

.row { display: flex; justify-content: space-around; margin: 20px 0; z-index: 1; position: relative; }

.player-card {
    width: 90px; height: 120px; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    border-radius: 10px; padding: 8px; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    transition: all 0.3s; flex-shrink: 0;
}
.player-card:hover { transform: translateY(-10px) scale(1.05); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
.player-card.filled { background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%); }
.player-card.empty { border: 2px dashed rgba(255,255,255,0.4); background: rgba(255,255,255,0.1); }

.player-position { font-size: 12px; font-weight: bold; color: #000; margin-bottom: 5px; }
.player-flag { font-size: 24px; margin: 5px 0; }
.player-name { font-size: 13px; font-weight: bold; text-align: center; line-height: 1.2; color: #000; }
.player-club { font-size: 9px; color: #333; margin-top: 2px; }
.empty-text { color: rgba(255,255,255,0.6); font-size: 11px; font-weight: bold; text-align: center; }

.goat-display .role-label {
    color: gold;
}

.coach-display,
.goat-display {
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.player-name {
    font-size: 12px;
    line-height: 1.2;
    text-align: center;
    white-space: normal;
    word-break: break-word;
    overflow: visible;
}


.role-label {
    font-size: 11px;
    font-weight: bold;
    text-transform: uppercase;
    opacity: 0.85;
    margin-bottom: 3px;
}

.goat-display .role-label {
    color: black;
}

.team-name-display {
    text-shadow: 0 2px 6px rgba(0,0,0,0.6);
    letter-spacing: 0.5px;
}




.coach-display, .goat-display {
    position: absolute; bottom: 15px; padding: 10px 16px; border-radius: 12px;
    display: flex; align-items: center; gap: 10px; font-weight: bold; z-index: 10;
    backdrop-filter: blur(4px); cursor: pointer; transition: all 0.3s;
}
.coach-display { left: 15px; background: rgba(0,0,0,0.45); color: white; }
.coach-display:hover, .goat-display:hover { transform: scale(1.05); }
.goat-display { right: 15px; background: linear-gradient(135deg, #ffd700, #ffed4e); color: #000;
    box-shadow: 0 4px 15px rgba(255,215,0,0.6); border: 2px solid #fff; }

.hidden { display: none; }

/* Modals */
#modal, #coachModal {
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center; padding: 20px;
}
/* Coach & GOAT carrÃ©s intÃ©grÃ©s dans la row GK */
.coach-card, .goat-card {
    width: 75px; height: 100px; border-radius: 14px; padding: 8px;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    box-shadow: 0 6px 16px rgba(0,0,0,0.5); cursor: pointer; transition: all 0.3s;
}
.coach-card { background: rgba(0,0,0,0.6); color: white; }
.goat-card { background: linear-gradient(135deg, #ffd700, #ffed4e); color: #000; border: 3px solid #fff; }
.coach-card:hover, .goat-card:hover { transform: translateY(-8px) scale(1.08); }

.coach-card .flag, .goat-card .flag { font-size: 28px; margin-bottom: 6px; }
.coach-card .name, .goat-card .name { font-size: 10px; font-weight: bold; text-align: center; word-wrap: break-word; max-width: 65px; }

.coach-card.empty, .goat-card.empty {
    border: 2px dashed rgba(255,255,255,0.5); background: rgba(255,255,255,0.15); color: rgba(255,255,255,0.8);
}
.modal-content {
    background: white; max-width: 500px; width: 100%; padding: 30px; border-radius: 20px; position: relative;
}
.close { position: absolute; top: 15px; right: 20px; font-size: 30px; cursor: pointer; color: #999; }
.close:hover { color: #333; }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #333; }
.form-group input, .form-group select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }

@media (max-width: 768px) {
    body {
        padding: 8px;
    }

    h1 {
        font-size: 2em;
    }

    header p {
        font-size: 0.95em;
    }

    .controls {
        padding: 15px;
    }

    .control-group {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }

    .control-group label {
        text-align: center;
    }

    .control-group input,
    .control-group select {
        width: 100%;
    }

    .btn {
        padding: 10px 18px;
        font-size: 15px;
    }

    /* Terrain plus compact mais lisible */
    #field {
        padding: 20px 10px 60px 10px; /* RÃ©duit mais garde de l'air */
        min-height: 580px;
        border-radius: 16px;
    }

    /* Lignes avec espacement raisonnable */
    .row {
        margin: 12px 0;
        justify-content: space-evenly; /* Espacement rÃ©gulier */
        flex-wrap: nowrap;
        overflow-x: auto;
        padding: 0 5px;
    }

    /* Cartes joueurs plus grandes et lisibles sur mobile */
    .player-card {
        width: 70px;
        height: 95px;
        padding: 6px;
        border-radius: 10px;
        min-width: 70px; /* EmpÃªche le rÃ©trÃ©cissement */
        flex-shrink: 0;
    }

    .player-position {
        font-size: 10px;
        margin-bottom: 4px;
    }

    .player-flag {
        font-size: 22px;
        margin: 4px 0;
    }

    .player-name {
        font-size: 9.5px;
        line-height: 1.2;
        max-height: 36px;
        overflow: hidden;
    }

    .player-club {
        font-size: 8px;
        display: block; /* On le remet, c'est lisible maintenant */
        opacity: 0.8;
    }

    .empty-text {
        font-size: 10px;
        line-height: 1.3;
    }

    /* === COACH & GOAT : intÃ©grÃ©s dans la ligne GK sur mobile === */
    .coach-display,
    .goat-display {
        position: static !important; /* Plus en absolute */
        width: 70px;
        height: 95px;
        border-radius: 10px;
        padding: 6px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        box-shadow: 0 5px 15px rgba(0,0,0,0.4);
        flex-shrink: 0;
        margin: 0 5px;
    }

    .coach-display {
        background: rgba(0,0,0,0.65);
        color: white;
        border: 2px solid rgba(255,255,255,0.3);
    }

    .goat-display {
        background: linear-gradient(135deg, #ffd700, #ffed4e);
        color: #000;
        border: 3px solid #fff;
        box-shadow: 0 5px 20px rgba(255,215,0,0.6);
    }

    .coach-display .role-label,
    .goat-display .role-label {
        font-size: 9px;
        margin-bottom: 4px;
    }

    .coach-display span,
    .goat-display span {
        font-size: 9.5px;
        line-height: 1.2;
        text-align: center;
        word-break: break-word;
        max-width: 60px;
    }

    /* Nom dâ€™Ã©quipe plus petit mais toujours visible */
    .team-name-display {
        font-size: 16px;
        padding: 5px 10px;
        top: 10px;
    }

    /* Masquer le club si vraiment trop long (optionnel) */
    .player-club {
        display: none; /* Tu peux remettre "block" si tu veux le garder */
    }
}

/* Desktop : on garde l'ancien positionnement absolu du Coach/GOAT */
@media (min-width: 769px) {
    .coach-display,
    .goat-display {
        position: absolute;
        bottom: 15px;
    }
    .coach-display { left: 15px; }
    .goat-display { right: 15px; }
}
/* Styles pour la modale d'export */
.modal-export-container {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.85); z-index: 2000;
    display: flex; justify-content: center; align-items: center; padding: 10px;
}
.modal-export-content {
    background: white; width: 100%; max-width: 600px;
    padding: 20px; border-radius: 15px; text-align: center;
    position: relative; max-height: 90vh; overflow-y: auto;
}
.close-export {
    position: absolute; top: 10px; right: 15px; font-size: 28px; cursor: pointer; color: #333;
}
#imgResultContainer img {
    max-width: 100%; height: auto; border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3); border: 2px solid #eee;
}
.mobile-hint { display: none; color: #666; margin-bottom: 10px; font-size: 14px; }
.desktop-hint { display: none; color: #666; margin-bottom: 10px; font-size: 14px; }

/* DÃ©tection tactile pour afficher le bon message */
@media (hover: none) and (pointer: coarse) {
    .mobile-hint { display: block; }
    #downloadBtn { display: none; } /* Souvent buggÃ© sur in-app, on prÃ©fÃ¨re le long-press */
}
@media (hover: hover) {
    .desktop-hint { display: block; }
}
.watermark {
    display: none; /* Toujours cachÃ© par dÃ©faut pour le site */
    position: absolute;
    bottom: 5px;   /* Se place Ã  5px du bord BLANC infÃ©rieur */
    right: 15px;   /* Se place Ã  15px du bord droit */
    color: #888;   /* Gris discret */
    font-size: 11px;
    pointer-events: none;
    z-index: 100;
    width: auto;   
    align-items: center;
    gap: 4px;
}

.watermark strong {
    color: #555;
    font-weight: bold;
}
</style>
</head>
<body>
<div class="container">
    <footer style="
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(10px);
    text-align: center;
    padding: 12px;
    font-size: 13px;
    color: #fff;
    z-index: 100;
    border-top: 1px solid rgba(255,255,255,0.2);
    ">
    <strong>Eleven Squad Builder âš½</strong><br>
    Â© 2025-2026 - CrÃ©Ã© par un passionnÃ©.<br>
    <small>Application communautaire gratuite â€¢ Affiliation personnel dans le but d'apprendre les bases de Bitcoin.</small>
    </footer>
    <header>
        <h1>âš½ Eleven Squad Builder</h1>
        <p>CrÃ©ez votre Ã©quipe de rÃªve - Toutes Ã©poques confondues.</p>
<p>â€¢ SÃ©lectionnez vos joueurs, votre coach et votre meilleur joueur.</p>
<p>â€¢ Cliquez sur exporter, prenez une capture d'ecran et partagez votre "best team".</p>
<p>Merci de nous soutenir en suivant les liens affiliÃ© pour l'Academie BTC. Contactez nous pour ajouter des correctifs. Application Ã  but communautaire. </p>
    </header>

    <div class="tabs">
        <button class="tab active" onclick="switchTab('builder')">ğŸ—ï¸ CrÃ©er</button>
        <a class="tab tab-link" href="https://soloist.ai/contribuablecaptif" rel="noopener">ğŸ“ AcadÃ©mie</a>
        <a class="tab tab-link" href="https://gomining.com/?ref=YC98XHW" rel="noopener">â¤ï¸ Nous soutenir</a>
        <a class="tab tab-link" href="https://soloist.ai/contribuablecaptif#contact-1" target="_blank">ğŸ“© Contact</a>
    </div>

    <div id="builder" class="content active">
        <div class="controls">
            <div class="control-group">
                <label>Nom de l'Ã©quipe:</label>
                <input type="text" id="teamName" placeholder="Mon Ã©quipe de lÃ©gende" oninput="updateTeamNameDisplay()" />

                <label>Formation:</label>
                <select id="formation" onchange="drawField()">
                    <option value="3-1-4-2">3-1-4-2</option>
                    <option value="3-4-1-2">3-4-1-2</option>
                    <option value="3-4-2-1">3-4-2-1</option>
                    <option value="3-4-3">3-4-3</option>
                    <option value="3-5-2">3-5-2</option>
                    <option value="4-1-2-1-2">4-1-2-1-2</option>
                    <option value="4-1-3-2">4-1-3-2</option>
                    <option value="4-1-4-1">4-1-4-1</option>
                    <option value="4-2-1-3">4-2-1-3</option>
                    <option value="4-2-2-2">4-2-2-2</option>
                    <option value="4-2-3-1">4-2-3-1</option>
                    <option value="4-2-4">4-2-4</option>
                    <option value="4-3-1-2">4-3-1-2</option>
                    <option value="4-3-3" selected>4-3-3</option>
                    <option value="4-4-1-1"selected>4-4-1-1</option>
                    <option value="4-4-2">4-4-2</option>
                    <option value="4-5-1">4-5-1</option>
                    <option value="5-2-1-2">5-2-1-2</option>
                    <option value="5-2-3">5-2-3</option>
                    <option value="5-3-2">5-3-2</option>
                    <option value="5-4-1">5-4-1</option>
                </select>

                <button class="btn btn-success" onclick="exportAsImage()">ğŸ“¸ Exporter</button>
                <button class="btn btn-secondary" onclick="openCoachModal()">ğŸ‘” Coach</button>
                <button class="btn btn-goat" onclick="openGoatModal()">ğŸ GOAT</button>
                <button class="btn" onclick="clearSquad()">ğŸ—‘ï¸ RÃ©initialiser</button>
            </div>
        </div>

        <div id="export-area">
            <div id="team-name-display" class="team-name-display hidden">Mon Ã©quipe</div>
            <div id="field"></div>
            <div class="watermark">
            <span>GÃ©nÃ©rÃ© sur <strong>skymourai.github.io/esq/</strong></span>
            </div>
        </div>
    </div>

    <!-- Autres onglets (Mes Ã©quipes, CommunautÃ©) - tu peux les garder tels quels -->
    <div id="mySquads" class="content">
        <div class="controls"><h2 style="text-align:center;">Mes Ã‰quipes SauvegardÃ©es</h2></div>
        <div id="squadsList" class="squad-list"></div>
    </div>
</div>


<!-- Modal joueur -->
<div id="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2 id="modalTitle">Ajouter un joueur</h2>
        <div class="form-group">
            <label>Nom du joueur</label>
            <input type="text" id="playerName" placeholder="Rechercher..." oninput="showSuggestions()" autocomplete="off" />
            <div id="suggestions" class="suggestions"></div>
        </div>
       <div class="form-group">
            <label>NationalitÃ©</label>
            <select id="playerFlag">
    <option value="ğŸ‡§ğŸ‡·">ğŸ‡§ğŸ‡· BrÃ©sil</option>
    <option value="ğŸ‡¦ğŸ‡·">ğŸ‡¦ğŸ‡· Argentine</option>
    <option value="ğŸ‡«ğŸ‡·">ğŸ‡«ğŸ‡· France</option>
    <option value="ğŸ‡µğŸ‡¹">ğŸ‡µğŸ‡¹ Portugal</option>
    <option value="ğŸ‡ªğŸ‡¸">ğŸ‡ªğŸ‡¸ Espagne</option>
    <option value="ğŸ‡©ğŸ‡ª">ğŸ‡©ğŸ‡ª Allemagne</option>
    <option value="ğŸ‡®ğŸ‡¹">ğŸ‡®ğŸ‡¹ Italie</option>
    <option value="ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿">ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Angleterre</option>
    <option value="ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿">ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿ Pays de Galles</option>
    <option value="ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿">ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ Ã‰cosse</option>
    <option value="ğŸ‡³ğŸ‡±">ğŸ‡³ğŸ‡± Pays-Bas</option>
    <option value="ğŸ‡§ğŸ‡ª">ğŸ‡§ğŸ‡ª Belgique</option>
    <option value="ğŸ‡ºğŸ‡¾">ğŸ‡ºğŸ‡¾ Uruguay</option>
    <option value="ğŸ‡¨ğŸ‡´">ğŸ‡¨ğŸ‡´ Colombie</option>
    <option value="ğŸ‡¨ğŸ‡±">ğŸ‡¨ğŸ‡± Chili</option>
    <option value="ğŸ‡²ğŸ‡½">ğŸ‡²ğŸ‡½ Mexique</option>
    <option value="ğŸ‡³ğŸ‡¬">ğŸ‡³ğŸ‡¬ Nigeria</option>
    <option value="ğŸ‡¸ğŸ‡³">ğŸ‡¸ğŸ‡³ SÃ©nÃ©gal</option>
    <option value="ğŸ‡ªğŸ‡¬">ğŸ‡ªğŸ‡¬ Ã‰gypte</option>
    <option value="ğŸ‡©ğŸ‡¿">ğŸ‡©ğŸ‡¿ AlgÃ©rie</option>
    <option value="ğŸ‡²ğŸ‡¦">ğŸ‡²ğŸ‡¦ Maroc</option>
    <option value="ğŸ‡°ğŸ‡·">ğŸ‡°ğŸ‡· CorÃ©e du Sud</option>
    <option value="ğŸ‡¯ğŸ‡µ">ğŸ‡¯ğŸ‡µ Japon</option>
    <option value="ğŸ‡ºğŸ‡¸">ğŸ‡ºğŸ‡¸ Ã‰tats-Unis</option>
    <option value="ğŸ‡¨ğŸ‡®">ğŸ‡¨ğŸ‡® CÃ´te d'Ivoire</option>
    <option value="ğŸ‡­ğŸ‡·">ğŸ‡­ğŸ‡· Croatie</option>
    <option value="ğŸ‡¨ğŸ‡¦">ğŸ‡¨ğŸ‡¦ Canada</option>
    <option value="ğŸ‡¸ğŸ‡ª">ğŸ‡¸ğŸ‡ª SuÃ¨de</option>
    <option value="ğŸ‡©ğŸ‡°">ğŸ‡©ğŸ‡° Danemark</option>
    <option value="ğŸŒ">ğŸŒ Reste du monde</option>
</select>
        </div>
        <div class="form-group">
            <label>Club (optionnel)</label>
            <input type="text" id="playerClub" placeholder="Ex: Real Madrid" />
        </div>
        <button class="btn" style="width:100%;" onclick="addPlayer()">Ajouter</button>
    </div>
</div>


<!-- Modal coach -->
<div id="coachModal">
    <div class="modal-content">
        <span class="close" onclick="closeCoachModal()">&times;</span>
        <h3>ğŸ‘” SÃ©lection du coach</h3>
        <div class="form-group">
            <label>Coach prÃ©sÃ©lectionnÃ©</label>
            <select id="coachPreset" onchange="if(this.value) document.getElementById('coachName').value = this.value">
                <option value="">-- Choisir --</option>
                <option>Pep Guardiola</option>
                <option>Sir Alex Ferguson</option>
                <option>Carlo Ancelotti</option>
                <option>JosÃ© Mourinho</option>
                <option>ZinÃ©dine Zidane</option>
                <option>ArsÃ¨ne Wenger</option>
                <option>JÃ¼rgen Klopp</option>
            </select>
        </div>
        <div class="form-group">
            <label>Ou nom personnalisÃ©</label>
            <input type="text" id="coachName" placeholder="Nom du coach" />
        </div>
        <div class="form-group">
            <label>NationalitÃ©</label>
            <select id="coachFlag">
    <option value="ğŸ‡§ğŸ‡·">ğŸ‡§ğŸ‡· BrÃ©sil</option>
    <option value="ğŸ‡¦ğŸ‡·">ğŸ‡¦ğŸ‡· Argentine</option>
    <option value="ğŸ‡«ğŸ‡·">ğŸ‡«ğŸ‡· France</option>
    <option value="ğŸ‡µğŸ‡¹">ğŸ‡µğŸ‡¹ Portugal</option>
    <option value="ğŸ‡ªğŸ‡¸">ğŸ‡ªğŸ‡¸ Espagne</option>
    <option value="ğŸ‡©ğŸ‡ª">ğŸ‡©ğŸ‡ª Allemagne</option>
    <option value="ğŸ‡®ğŸ‡¹">ğŸ‡®ğŸ‡¹ Italie</option>
    <option value="ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿">ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Angleterre</option>
    <option value="ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿">ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿ Pays de Galles</option>
    <option value="ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿">ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ Ã‰cosse</option>
    <option value="ğŸ‡³ğŸ‡±">ğŸ‡³ğŸ‡± Pays-Bas</option>
    <option value="ğŸ‡§ğŸ‡ª">ğŸ‡§ğŸ‡ª Belgique</option>
    <option value="ğŸ‡ºğŸ‡¾">ğŸ‡ºğŸ‡¾ Uruguay</option>
    <option value="ğŸ‡¨ğŸ‡´">ğŸ‡¨ğŸ‡´ Colombie</option>
    <option value="ğŸ‡¨ğŸ‡±">ğŸ‡¨ğŸ‡± Chili</option>
    <option value="ğŸ‡²ğŸ‡½">ğŸ‡²ğŸ‡½ Mexique</option>
    <option value="ğŸ‡³ğŸ‡¬">ğŸ‡³ğŸ‡¬ Nigeria</option>
    <option value="ğŸ‡¸ğŸ‡³">ğŸ‡¸ğŸ‡³ SÃ©nÃ©gal</option>
    <option value="ğŸ‡ªğŸ‡¬">ğŸ‡ªğŸ‡¬ Ã‰gypte</option>
    <option value="ğŸ‡©ğŸ‡¿">ğŸ‡©ğŸ‡¿ AlgÃ©rie</option>
    <option value="ğŸ‡²ğŸ‡¦">ğŸ‡²ğŸ‡¦ Maroc</option>
    <option value="ğŸ‡°ğŸ‡·">ğŸ‡°ğŸ‡· CorÃ©e du Sud</option>
    <option value="ğŸ‡¯ğŸ‡µ">ğŸ‡¯ğŸ‡µ Japon</option>
    <option value="ğŸ‡ºğŸ‡¸">ğŸ‡ºğŸ‡¸ Ã‰tats-Unis</option>
    <option value="ğŸ‡¨ğŸ‡®">ğŸ‡¨ğŸ‡® CÃ´te d'Ivoire</option>
    <option value="ğŸ‡­ğŸ‡·">ğŸ‡­ğŸ‡· Croatie</option>
    <option value="ğŸ‡¨ğŸ‡¦">ğŸ‡¨ğŸ‡¦ Canada</option>
    <option value="ğŸ‡¸ğŸ‡ª">ğŸ‡¸ğŸ‡ª SuÃ¨de</option>
    <option value="ğŸ‡©ğŸ‡°">ğŸ‡©ğŸ‡° Danemark</option>
    <option value="ğŸŒ">ğŸŒ Reste du monde</option>
</select>
        </div>
        <button class="btn" style="width:100%;" onclick="saveCoach()">âœ… Valider</button>
    </div>
</div>
<div id="exportModal" class="modal-export-container" style="display:none;">
    <div class="modal-export-content">
        <span class="close-export" onclick="closeExportModal()">&times;</span>
        <h3>ğŸ“¸ Votre Ã©quipe est prÃªte !</h3>
        <p class="mobile-hint">ğŸ“± Maintenez l'image appuyÃ©e pour l'enregistrer ou la partager.</p>
        <p class="desktop-hint">ğŸ’» Clic droit > Enregistrer l'image sous...</p>
        <div id="imgResultContainer"></div>
        <a id="downloadBtn" class="btn btn-success" style="display:inline-block; margin-top:15px; text-decoration:none;">â¬‡ï¸ TÃ©lÃ©charger l'image</a>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
// --- DONNÃ‰ES ---
const formations = {
    '3-1-4-2': [ ['GK'], ['CB','CB','CB'], ['CDM'], ['LM','CM','CM','RM'], ['ST','ST'] ],
    '3-4-1-2': [ ['GK'], ['CB','CB','CB'], ['LM','CM','CM','RM'], ['CAM'], ['ST','ST'] ],
    '3-4-2-1': [ ['GK'], ['CB','CB','CB'], ['LM','CM','CM','RM'], ['CF','CF'], ['ST'] ],
    '3-4-3': [ ['GK'], ['CB','CB','CB'], ['LM','CM','CM','RM'], ['LW','ST','RW'] ],
    '3-5-2': [ ['GK'], ['CB','CB','CB'], ['LM','CM','CM','CM','RM'], ['ST','ST'] ],
    '4-1-2-1-2': [ ['GK'], ['LB','CB','CB','RB'], ['CDM'], ['CM','CM'], ['CAM'], ['ST','ST'] ],
    '4-1-3-2': [ ['GK'], ['LB','CB','CB','RB'], ['CDM'], ['LM','CM','RM'], ['ST','ST'] ],
    '4-1-4-1': [ ['GK'], ['LB','CB','CB','RB'], ['CDM'], ['LM','CM','CM','RM'], ['ST'] ],
    '4-2-1-3': [ ['GK'], ['LB','CB','CB','RB'], ['CDM','CDM'], ['CAM'], ['LW','ST','RW'] ],
    '4-2-2-2': [ ['GK'], ['LB','CB','CB','RB'], ['CDM','CDM'], ['CAM','CAM'], ['ST','ST'] ],
    '4-2-3-1': [ ['GK'], ['LB','CB','CB','RB'], ['CDM','CDM'], ['LM','CAM','RM'], ['ST'] ],
    '4-2-4': [ ['GK'], ['LB','CB','CB','RB'], ['CM','CM'], ['LW','RW','ST','ST'] ],
    '4-3-1-2': [ ['GK'], ['LB','CB','CB','RB'], ['CM','CM','CM'], ['CAM'], ['ST','ST'] ],
    '4-3-3': [ ['GK'], ['LB','CB','CB','RB'], ['CM','CM','CM'], ['LW','ST','RW'] ],
    '4-4-2': [ ['GK'], ['LB','CB','CB','RB'], ['LM','CM','CM','RM'], ['ST','ST'] ],
    '4-4-1-1': [ ['GK'], ['LB','CB','CB','RB'], ['LM','CM','CM','RM'], ['CAM'], ['ST'] ],
    '4-5-1': [ ['GK'], ['LB','CB','CB','RB'], ['LM','CM','CM','CM','RM'], ['ST'] ],
    '5-2-1-2': [ ['GK'], ['LB','CB','CB','CB','RB'], ['CM','CM'], ['CAM'], ['ST','ST'] ],
    '5-2-3': [ ['GK'], ['LB','CB','CB','CB','RB'], ['CM','CM'], ['LW','ST','RW'] ],
    '5-3-2': [ ['GK'], ['LB','CB','CB','CB','RB'], ['CM','CM','CM'], ['ST','ST'] ],
    '5-4-1': [ ['GK'], ['LB','CB','CB','CB','RB'], ['LM','CM','CM','RM'], ['ST'] ]
};

const playersDatabase = [
    // CHAMPIONS DU MONDE - ARGENTINE (1978, 1986, 2022)
    { name: 'Lionel Messi', flag: 'ğŸ‡¦ğŸ‡·', club: 'Inter Miami' },
    { name: 'Diego Maradona', flag: 'ğŸ‡¦ğŸ‡·', club: 'Napoli' },
    { name: 'Ãngel Di MarÃ­a', flag: 'ğŸ‡¦ğŸ‡·', club: 'Benfica' },
    { name: 'Enzo FernÃ¡ndez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Chelsea' },
    { name: 'Alexis Mac Allister', flag: 'ğŸ‡¦ğŸ‡·', club: 'Liverpool' },
    { name: 'Emiliano MartÃ­nez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Aston Villa' },
    { name: 'JuliÃ¡n Ãlvarez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Manchester City' },
    { name: 'Rodrigo De Paul', flag: 'ğŸ‡¦ğŸ‡·', club: 'AtlÃ©tico Madrid' },
    { name: 'NicolÃ¡s Otamendi', flag: 'ğŸ‡¦ğŸ‡·', club: 'Benfica' },
    { name: 'Cristian Romero', flag: 'ğŸ‡¦ğŸ‡·', club: 'Tottenham' },
    { name: 'Lisandro MartÃ­nez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Manchester United' },
    { name: 'Sergio AgÃ¼ero', flag: 'ğŸ‡¦ğŸ‡·', club: 'Manchester City' },
    { name: 'Javier Mascherano', flag: 'ğŸ‡¦ğŸ‡·', club: 'Barcelona' },
    { name: 'Gabriel Batistuta', flag: 'ğŸ‡¦ğŸ‡·', club: 'Fiorentina' },
    { name: 'Daniel Passarella', flag: 'ğŸ‡¦ğŸ‡·', club: 'River Plate' },
    { name: 'Mario Kempes', flag: 'ğŸ‡¦ğŸ‡·', club: 'Valencia' },
    { name: 'Osvaldo Ardiles', flag: 'ğŸ‡¦ğŸ‡·', club: 'Tottenham' },
    { name: 'Javier Zanetti', flag: 'ğŸ‡¦ğŸ‡·', club: 'Inter Milan' },
    { name: 'Juan RomÃ¡n Riquelme', flag: 'ğŸ‡¦ğŸ‡·', club: 'Boca Juniors' },
    { name: 'HernÃ¡n Crespo', flag: 'ğŸ‡¦ğŸ‡·', club: 'Chelsea' },
    { name: 'Carlos TÃ©vez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Juventus' },
    { name: 'Gonzalo HiguaÃ­n', flag: 'ğŸ‡¦ğŸ‡·', club: 'Napoli' },
    { name: 'Alfredo Di StÃ©fano', flag: 'ğŸ‡¦ğŸ‡·', club: 'Real Madrid' },
    
    // CHAMPIONS DU MONDE - BRÃ‰SIL (1958, 1962, 1970, 1994, 2002)
    { name: 'PelÃ©', flag: 'ğŸ‡§ğŸ‡·', club: 'Santos' },
    { name: 'Ronaldo NazÃ¡rio', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Ronaldinho', flag: 'ğŸ‡§ğŸ‡·', club: 'Barcelona' },
    { name: 'RomÃ¡rio', flag: 'ğŸ‡§ğŸ‡·', club: 'Barcelona' },
    { name: 'Rivaldo', flag: 'ğŸ‡§ğŸ‡·', club: 'Barcelona' },
    { name: 'Cafu', flag: 'ğŸ‡§ğŸ‡·', club: 'AC Milan' },
    { name: 'Roberto Carlos', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Garrincha', flag: 'ğŸ‡§ğŸ‡·', club: 'Botafogo' },
    { name: 'Jairzinho', flag: 'ğŸ‡§ğŸ‡·', club: 'Botafogo' },
    { name: 'Carlos Alberto', flag: 'ğŸ‡§ğŸ‡·', club: 'Santos' },
    { name: 'Zico', flag: 'ğŸ‡§ğŸ‡·', club: 'Flamengo' },
    { name: 'SÃ³crates', flag: 'ğŸ‡§ğŸ‡·', club: 'Corinthians' },
    { name: 'Bebeto', flag: 'ğŸ‡§ğŸ‡·', club: 'Deportivo' },
    { name: 'Dunga', flag: 'ğŸ‡§ğŸ‡·', club: 'Stuttgart' },
    { name: 'KakÃ¡', flag: 'ğŸ‡§ğŸ‡·', club: 'AC Milan' },
    { name: 'Gilberto Silva', flag: 'ğŸ‡§ğŸ‡·', club: 'Arsenal' },
    { name: 'LÃºcio', flag: 'ğŸ‡§ğŸ‡·', club: 'Bayern Munich' },
    { name: 'Taffarel', flag: 'ğŸ‡§ğŸ‡·', club: 'Galatasaray' },
    { name: 'Dida', flag: 'ğŸ‡§ğŸ‡·', club: 'AC Milan' },
    { name: 'Neymar Jr', flag: 'ğŸ‡§ğŸ‡·', club: 'Al Hilal' },
    { name: 'Thiago Silva', flag: 'ğŸ‡§ğŸ‡·', club: 'Chelsea' },
    { name: 'Dani Alves', flag: 'ğŸ‡§ğŸ‡·', club: 'Barcelona' },
    { name: 'Marcelo', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Vinicius Jr', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Rodrygo', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Casemiro', flag: 'ğŸ‡§ğŸ‡·', club: 'Manchester United' },
    { name: 'Alisson Becker', flag: 'ğŸ‡§ğŸ‡·', club: 'Liverpool' },
    { name: 'Ederson', flag: 'ğŸ‡§ğŸ‡·', club: 'Manchester City' },
    { name: 'Fabinho', flag: 'ğŸ‡§ğŸ‡·', club: 'Liverpool' },
    
    // CHAMPIONS DU MONDE - FRANCE (1998, 2018)
    { name: 'Zinedine Zidane', flag: 'ğŸ‡«ğŸ‡·', club: 'Real Madrid' },
    { name: 'Kylian MbappÃ©', flag: 'ğŸ‡«ğŸ‡·', club: 'Real Madrid' },
    { name: 'Thierry Henry', flag: 'ğŸ‡«ğŸ‡·', club: 'Arsenal' },
    { name: 'Michel Platini', flag: 'ğŸ‡«ğŸ‡·', club: 'Juventus' },
    { name: 'Antoine Griezmann', flag: 'ğŸ‡«ğŸ‡·', club: 'AtlÃ©tico Madrid' },
    { name: 'NGolo KantÃ©', flag: 'ğŸ‡«ğŸ‡·', club: 'Chelsea' },
    { name: 'Paul Pogba', flag: 'ğŸ‡«ğŸ‡·', club: 'Juventus' },
    { name: 'RaphaÃ«l Varane', flag: 'ğŸ‡«ğŸ‡·', club: 'Manchester United' },
    { name: 'Hugo Lloris', flag: 'ğŸ‡«ğŸ‡·', club: 'Tottenham' },
    { name: 'Olivier Giroud', flag: 'ğŸ‡«ğŸ‡·', club: 'AC Milan' },
    { name: 'Patrick Vieira', flag: 'ğŸ‡«ğŸ‡·', club: 'Arsenal' },
    { name: 'Didier Deschamps', flag: 'ğŸ‡«ğŸ‡·', club: 'Juventus' },
    { name: 'Marcel Desailly', flag: 'ğŸ‡«ğŸ‡·', club: 'Chelsea' },
    { name: 'Lilian Thuram', flag: 'ğŸ‡«ğŸ‡·', club: 'Barcelona' },
    { name: 'Laurent Blanc', flag: 'ğŸ‡«ğŸ‡·', club: 'Manchester United' },
    { name: 'Fabien Barthez', flag: 'ğŸ‡«ğŸ‡·', club: 'Manchester United' },
    { name: 'Robert PirÃ¨s', flag: 'ğŸ‡«ğŸ‡·', club: 'Arsenal' },
    { name: 'Eric Cantona', flag: 'ğŸ‡«ğŸ‡·', club: 'Manchester United' },
    { name: 'Karim Benzema', flag: 'ğŸ‡«ğŸ‡·', club: 'Al Ittihad' },
    { name: 'Franck RibÃ©ry', flag: 'ğŸ‡«ğŸ‡·', club: 'Bayern Munich' },
    { name: 'Blaise Matuidi', flag: 'ğŸ‡«ğŸ‡·', club: 'Juventus' },
    { name: 'Theo HernÃ¡ndez', flag: 'ğŸ‡«ğŸ‡·', club: 'AC Milan' },
    { name: 'AurÃ©lien TchouamÃ©ni', flag: 'ğŸ‡«ğŸ‡·', club: 'Real Madrid' },
    { name: 'Eduardo Camavinga', flag: 'ğŸ‡«ğŸ‡·', club: 'Real Madrid' },
    { name: 'Kingsley Coman', flag: 'ğŸ‡«ğŸ‡·', club: 'Bayern Munich' },
    { name: 'Benjamin Pavard', flag: 'ğŸ‡«ğŸ‡·', club: 'Inter Milan' },
    { name: 'Lucas HernÃ¡ndez', flag: 'ğŸ‡«ğŸ‡·', club: 'PSG' },
    { name: 'Presnel Kimpembe', flag: 'ğŸ‡«ğŸ‡·', club: 'PSG' },
    { name: 'Samuel Umtiti', flag: 'ğŸ‡«ğŸ‡·', club: 'Lille' },
    
    // CHAMPIONS DU MONDE - ALLEMAGNE (1954, 1974, 1990, 2014)
    { name: 'Franz Beckenbauer', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Gerd MÃ¼ller', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Lothar MatthÃ¤us', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Philipp Lahm', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Bastian Schweinsteiger', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Manuel Neuer', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Toni Kroos', flag: 'ğŸ‡©ğŸ‡ª', club: 'Real Madrid' },
    { name: 'Mesut Ã–zil', flag: 'ğŸ‡©ğŸ‡ª', club: 'Real Madrid' },
    { name: 'Thomas MÃ¼ller', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Marco Reus', flag: 'ğŸ‡©ğŸ‡ª', club: 'Borussia Dortmund' },
    { name: 'Mats Hummels', flag: 'ğŸ‡©ğŸ‡ª', club: 'Borussia Dortmund' },
    { name: 'JÃ©rÃ´me Boateng', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Sami Khedira', flag: 'ğŸ‡©ğŸ‡ª', club: 'Juventus' },
    { name: 'Miroslav Klose', flag: 'ğŸ‡©ğŸ‡ª', club: 'Lazio' },
    { name: 'JÃ¼rgen Klinsmann', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Oliver Kahn', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Michael Ballack', flag: 'ğŸ‡©ğŸ‡ª', club: 'Chelsea' },
    { name: 'Matthias Sammer', flag: 'ğŸ‡©ğŸ‡ª', club: 'Borussia Dortmund' },
    { name: 'Rudi VÃ¶ller', flag: 'ğŸ‡©ğŸ‡ª', club: 'Roma' },
    { name: 'Andreas Brehme', flag: 'ğŸ‡©ğŸ‡ª', club: 'Inter Milan' },
    
    // CHAMPIONS DU MONDE - ITALIE (1934, 1938, 1982, 2006)
    { name: 'Paolo Maldini', flag: 'ğŸ‡®ğŸ‡¹', club: 'AC Milan' },
    { name: 'Gianluigi Buffon', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Andrea Pirlo', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Alessandro Del Piero', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Francesco Totti', flag: 'ğŸ‡®ğŸ‡¹', club: 'AS Roma' },
    { name: 'Giorgio Chiellini', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Leonardo Bonucci', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Gianluigi Donnarumma', flag: 'ğŸ‡®ğŸ‡¹', club: 'PSG' },
    { name: 'Marco Verratti', flag: 'ğŸ‡®ğŸ‡¹', club: 'Al Arabi' },
    { name: 'Fabio Cannavaro', flag: 'ğŸ‡®ğŸ‡¹', club: 'Real Madrid' },
    { name: 'Dino Zoff', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Roberto Baggio', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Franco Baresi', flag: 'ğŸ‡®ğŸ‡¹', club: 'AC Milan' },
    { name: 'Giuseppe Meazza', flag: 'ğŸ‡®ğŸ‡¹', club: 'Inter Milan' },
    { name: 'Luigi Riva', flag: 'ğŸ‡®ğŸ‡¹', club: 'Cagliari' },
    { name: 'Paolo Rossi', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Marco Tardelli', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Alessandro Nesta', flag: 'ğŸ‡®ğŸ‡¹', club: 'AC Milan' },
    { name: 'Marco Materazzi', flag: 'ğŸ‡®ğŸ‡¹', club: 'Inter Milan' },
    { name: 'Daniele De Rossi', flag: 'ğŸ‡®ğŸ‡¹', club: 'AS Roma' },
    { name: 'Gennaro Gattuso', flag: 'ğŸ‡®ğŸ‡¹', club: 'AC Milan' },
    { name: 'Mauro Camoranesi', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    
    // CHAMPIONS DU MONDE - ESPAGNE (2010)
    { name: 'Iker Casillas', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Madrid' },
    { name: 'Xavi HernÃ¡ndez', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'AndrÃ©s Iniesta', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Sergio Ramos', flag: 'ğŸ‡ªğŸ‡¸', club: 'Sevilla' },
    { name: 'Sergio Busquets', flag: 'ğŸ‡ªğŸ‡¸', club: 'Inter Miami' },
    { name: 'Carles Puyol', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Gerard PiquÃ©', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Fernando Torres', flag: 'ğŸ‡ªğŸ‡¸', club: 'Liverpool' },
    { name: 'David Villa', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'RaÃºl GonzÃ¡lez', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Madrid' },
    { name: 'David Silva', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Sociedad' },
    { name: 'Cesc FÃ bregas', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Xabi Alonso', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Madrid' },
    { name: 'Emilio ButragueÃ±o', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Madrid' },
    { name: 'Luis Enrique', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Jordi Alba', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Pedro RodrÃ­guez', flag: 'ğŸ‡ªğŸ‡¸', club: 'Chelsea' },
    { name: 'Juan Mata', flag: 'ğŸ‡ªğŸ‡¸', club: 'Manchester United' },

    // === PAYS DE GALLES ===
    { name: 'Gareth Bale', flag: 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿', club: 'Real Madrid' },
    { name: 'Ryan Giggs', flag: 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿', club: 'Manchester United' },
    { name: 'Ian Rush', flag: 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿', club: 'Liverpool' },
    { name: 'Aaron Ramsey', flag: 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿', club: 'Juventus' },

    // === Ã‰COSSE ===
    { name: 'Kenny Dalglish', flag: 'ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿', club: 'Liverpool' },
    { name: 'Denis Law', flag: 'ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿', club: 'Manchester United' },
    { name: 'Andy Robertson', flag: 'ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿', club: 'Liverpool' },
    { name: 'Billy Bremner', flag: 'ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿', club: 'Leeds United' },
    
    // CHAMPIONS D'EUROPE - ANGLETERRE (Ligue des Champions)
    { name: 'Bobby Charlton', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'George Best', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'David Beckham', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Ryan Giggs', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Paul Scholes', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Roy Keane', flag: 'ğŸ‡®ğŸ‡ª', club: 'Manchester United' },
    { name: 'Steven Gerrard', flag: 'ğŸ´', club: 'Liverpool' },
    { name: 'Frank Lampard', flag: 'ğŸ´', club: 'Chelsea' },
    { name: 'John Terry', flag: 'ğŸ´', club: 'Chelsea' },
    { name: 'Didier Drogba', flag: 'ğŸ‡¨ğŸ‡®', club: 'Chelsea' },
    { name: 'Wayne Rooney', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Rio Ferdinand', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Ashley Cole', flag: 'ğŸ´', club: 'Chelsea' },
    { name: 'Gary Neville', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Peter Schmeichel', flag: 'ğŸ‡©ğŸ‡°', club: 'Manchester United' },
    { name: 'Edwin van der Sar', flag: 'ğŸ‡³ğŸ‡±', club: 'Manchester United' },
    { name: 'Harry Kane', flag: 'ğŸ´', club: 'Bayern Munich' },
    { name: 'Jude Bellingham', flag: 'ğŸ´', club: 'Real Madrid' },
    { name: 'Phil Foden', flag: 'ğŸ´', club: 'Manchester City' },
    { name: 'Bukayo Saka', flag: 'ğŸ´', club: 'Arsenal' },
    { name: 'Declan Rice', flag: 'ğŸ´', club: 'Arsenal' },
    { name: 'Raheem Sterling', flag: 'ğŸ´', club: 'Chelsea' },
    { name: 'Marcus Rashford', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Jadon Sancho', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Mason Mount', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Jack Grealish', flag: 'ğŸ´', club: 'Manchester City' },
    { name: 'Jamie Carragher', flag: 'ğŸ´', club: 'Liverpool' },
    { name: 'Michael Owen', flag: 'ğŸ´', club: 'Liverpool' },
    { name: 'Robbie Fowler', flag: 'ğŸ´', club: 'Liverpool' },
    
    // CHAMPIONS D'EUROPE - PORTUGAL
    { name: 'Cristiano Ronaldo', flag: 'ğŸ‡µğŸ‡¹', club: 'Al Nassr' },
    { name: 'Luis Figo', flag: 'ğŸ‡µğŸ‡¹', club: 'Real Madrid' },
    { name: 'EusÃ©bio', flag: 'ğŸ‡µğŸ‡¹', club: 'Benfica' },
    { name: 'Rui Costa', flag: 'ğŸ‡µğŸ‡¹', club: 'AC Milan' },
    { name: 'Deco', flag: 'ğŸ‡µğŸ‡¹', club: 'Barcelona' },
    { name: 'Ricardo Carvalho', flag: 'ğŸ‡µğŸ‡¹', club: 'Chelsea' },
    { name: 'Pepe', flag: 'ğŸ‡µğŸ‡¹', club: 'Real Madrid' },
    { name: 'Bruno Fernandes', flag: 'ğŸ‡µğŸ‡¹', club: 'Manchester United' },
    { name: 'Bernardo Silva', flag: 'ğŸ‡µğŸ‡¹', club: 'Manchester City' },
    { name: 'JoÃ£o FÃ©lix', flag: 'ğŸ‡µğŸ‡¹', club: 'Barcelona' },
    { name: 'Rafael LeÃ£o', flag: 'ğŸ‡µğŸ‡¹', club: 'AC Milan' },
    { name: 'Diogo Jota', flag: 'ğŸ‡µğŸ‡¹', club: 'Liverpool' },
    { name: 'RÃºben Dias', flag: 'ğŸ‡µğŸ‡¹', club: 'Manchester City' },
    { name: 'JoÃ£o Cancelo', flag: 'ğŸ‡µğŸ‡¹', club: 'Barcelona' },
    
    // CHAMPIONS D'EUROPE - PAYS-BAS
    { name: 'Johan Cruyff', flag: 'ğŸ‡³ğŸ‡±', club: 'Ajax' },
    { name: 'Marco van Basten', flag: 'ğŸ‡³ğŸ‡±', club: 'AC Milan' },
    { name: 'Ruud Gullit', flag: 'ğŸ‡³ğŸ‡±', club: 'AC Milan' },
    { name: 'Frank Rijkaard', flag: 'ğŸ‡³ğŸ‡±', club: 'AC Milan' },
    { name: 'Dennis Bergkamp', flag: 'ğŸ‡³ğŸ‡±', club: 'Arsenal' },
    { name: 'Clarence Seedorf', flag: 'ğŸ‡³ğŸ‡±', club: 'AC Milan' },
    { name: 'Wesley Sneijder', flag: 'ğŸ‡³ğŸ‡±', club: 'Inter Milan' },
    { name: 'Arjen Robben', flag: 'ğŸ‡³ğŸ‡±', club: 'Bayern Munich' },
    { name: 'Robin van Persie', flag: 'ğŸ‡³ğŸ‡±', club: 'Arsenal' },
    { name: 'Ruud van Nistelrooy', flag: 'ğŸ‡³ğŸ‡±', club: 'Manchester United' },
    { name: 'Virgil van Dijk', flag: 'ğŸ‡³ğŸ‡±', club: 'Liverpool' },
    { name: 'Matthijs de Ligt', flag: 'ğŸ‡³ğŸ‡±', club: 'Bayern Munich' },
    { name: 'Frenkie de Jong', flag: 'ğŸ‡³ğŸ‡±', club: 'Barcelona' },
    
    // CHAMPIONS D'EUROPE - AUTRES NATIONS
    { name: 'Luka ModriÄ‡', flag: 'ğŸ‡­ğŸ‡·', club: 'Real Madrid' },
    { name: 'Ivan RakitiÄ‡', flag: 'ğŸ‡­ğŸ‡·', club: 'Barcelona' },
    { name: 'Zvonimir Boban', flag: 'ğŸ‡­ğŸ‡·', club: 'AC Milan' },
    { name: 'Davor Å uker', flag: 'ğŸ‡­ğŸ‡·', club: 'Real Madrid' },
    { name: 'Mateo KovaÄiÄ‡', flag: 'ğŸ‡­ğŸ‡·', club: 'Chelsea' },
    { name: 'JoÅ¡ko Gvardiol', flag: 'ğŸ‡­ğŸ‡·', club: 'Manchester City' },
    { name: 'Luis SuÃ¡rez', flag: 'ğŸ‡ºğŸ‡¾', club: 'Gremio' },
    { name: 'Edinson Cavani', flag: 'ğŸ‡ºğŸ‡¾', club: 'Valencia' },
    { name: 'Diego ForlÃ¡n', flag: 'ğŸ‡ºğŸ‡¾', club: 'AtlÃ©tico Madrid' },
    { name: 'Federico Valverde', flag: 'ğŸ‡ºğŸ‡¾', club: 'Real Madrid' },
    { name: 'Darwin NÃºÃ±ez', flag: 'ğŸ‡ºğŸ‡¾', club: 'Liverpool' },
    { name: 'Kevin De Bruyne', flag: 'ğŸ‡§ğŸ‡ª', club: 'Manchester City' },
    { name: 'Eden Hazard', flag: 'ğŸ‡§ğŸ‡ª', club: 'Chelsea' },
    { name: 'Thibaut Courtois', flag: 'ğŸ‡§ğŸ‡ª', club: 'Real Madrid' },
    { name: 'Romelu Lukaku', flag: 'ğŸ‡§ğŸ‡ª', club: 'Inter Milan' },
    { name: 'Vincent Kompany', flag: 'ğŸ‡§ğŸ‡ª', club: 'Manchester City' },
    { name: 'Alexis SÃ¡nchez', flag: 'ğŸ‡¨ğŸ‡±', club: 'Inter Milan' },
    { name: 'Arturo Vidal', flag: 'ğŸ‡¨ğŸ‡±', club: 'Flamengo' },
    { name: 'James RodrÃ­guez', flag: 'ğŸ‡¨ğŸ‡´', club: 'SÃ£o Paulo' },
    { name: 'Radamel Falcao', flag: 'ğŸ‡¨ğŸ‡´', club: 'Millonarios' },
    { name: 'Luis DÃ­az', flag: 'ğŸ‡¨ğŸ‡´', club: 'Liverpool' },
    { name: 'Samuel Eto\'o', flag: 'ğŸ‡¨ğŸ‡²', club: 'Barcelona' },
    { name: 'George Weah', flag: 'ğŸ‡±ğŸ‡·', club: 'AC Milan' },
    { name: 'Yaya TourÃ©', flag: 'ğŸ‡¨ğŸ‡®', club: 'Barcelona' },
    { name: 'Sadio ManÃ©', flag: 'ğŸ‡¸ğŸ‡³', club: 'Al Nassr' },
    { name: 'Mohamed Salah', flag: 'ğŸ‡ªğŸ‡¬', club: 'Liverpool' },
    { name: 'Riyad Mahrez', flag: 'ğŸ‡©ğŸ‡¿', club: 'Al Ahli' },
    { name: 'Victor Osimhen', flag: 'ğŸ‡³ğŸ‡¬', club: 'Napoli' },
    { name: 'Achraf Hakimi', flag: 'ğŸ‡²ğŸ‡¦', club: 'PSG' },
    { name: 'Heung-Min Son', flag: 'ğŸ‡°ğŸ‡·', club: 'Tottenham' },
    { name: 'Park Ji-Sung', flag: 'ğŸ‡°ğŸ‡·', club: 'Manchester United' },
    { name: 'Zlatan IbrahimoviÄ‡', flag: 'ğŸ‡¸ğŸ‡ª', club: 'AC Milan' },
    { name: 'Henrik Larsson', flag: 'ğŸ‡¸ğŸ‡ª', club: 'Barcelona' },
    { name: 'Erling Haaland', flag: 'ğŸ‡³ğŸ‡´', club: 'Manchester City' },
    { name: 'Martin Ã˜degaard', flag: 'ğŸ‡³ğŸ‡´', club: 'Arsenal' },
    { name: 'Christian Eriksen', flag: 'ğŸ‡©ğŸ‡°', club: 'Manchester United' },
    { name: 'Pavel NedvÄ›d', flag: 'ğŸ‡¨ğŸ‡¿', club: 'Juventus' },
    { name: 'Andriy Shevchenko', flag: 'ğŸ‡ºğŸ‡¦', club: 'AC Milan' },
    { name: 'Robert Lewandowski', flag: 'ğŸ‡µğŸ‡±', club: 'Barcelona' },
    { name: 'Gareth Bale', flag: 'ğŸ´', club: 'Real Madrid' },
    { name: 'Gheorghe Hagi', flag: 'ğŸ‡·ğŸ‡´', club: 'Galatasaray' }
];

// --- Ã‰TAT DE L'APPLICATION ---
let currentSquad = [];
let coach = null;
let goat = null;
let currentPosition = null;

// --- INITIALISATION ---
// CORRECTION : Ajout d'un Ã©couteur pour redessiner le terrain si on change la taille de l'Ã©cran
window.addEventListener('resize', () => {
    // Petit dÃ©lai pour Ã©viter de redessiner 100 fois par seconde
    clearTimeout(window.resizeTimer);
    window.resizeTimer = setTimeout(drawField, 100);
});

function switchTab(tabName) {
    document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(tabName)?.classList.add('active');
}

// --- FONCTION PRINCIPALE DE DESSIN ---
function drawField() {
    const field = document.getElementById('field');
    field.innerHTML = ''; // On vide le terrain

    const formation = document.getElementById('formation').value;
    const rows = formations[formation];

    // CORRECTION : CrÃ©ation propre des Ã©lÃ©ments Coach et GOAT Ã  chaque redessin
    // On ne cherche pas Ã  les rÃ©cupÃ©rer via ID car ils ont Ã©tÃ© supprimÃ©s par innerHTML = ''
    
    // CrÃ©ation Coach
    const coachDiv = document.createElement('div');
    coachDiv.className = 'coach-display ' + (coach ? '' : 'hidden');
    coachDiv.innerHTML = `
        <div class="role-label">Coach</div>
        <span class="coach-flag">${coach ? coach.flag : ''}</span>
        <span class="coach-name">${coach ? coach.name : ''}</span>
    `;
    coachDiv.onclick = openCoachModal;

    // CrÃ©ation GOAT
    const goatDiv = document.createElement('div');
    goatDiv.className = 'goat-display ' + (goat ? '' : 'hidden');
    goatDiv.innerHTML = `
        <div class="role-label">Le GOAT</div>
        <span class="goat-flag">${goat ? goat.flag : ''}</span>
        <span class="goat-name">${goat ? goat.name : ''}</span>
    `;
    goatDiv.onclick = openGoatModal;

    // DÃ©tection Mobile ou Desktop pour le placement
    const isMobile = window.innerWidth <= 768;

    // Construction des lignes
    for (let i = rows.length - 1; i >= 0; i--) {
        const rowDiv = document.createElement('div');
        rowDiv.className = 'row';

        // Ligne du gardien (GK)
        if (rows[i][0] === 'GK') {
            rowDiv.classList.add('gk-row');

            // Sur mobile : on met le coach Ã  gauche du gardien
            if (isMobile) rowDiv.appendChild(coachDiv);

            rows[i].forEach((pos, index) => {
                const posKey = `${i}-${index}`;
                const player = currentSquad.find(p => p.posKey === posKey);
                const card = createPlayerCard(pos, player, i, index);
                rowDiv.appendChild(card);
            });

            // Sur mobile : on met le GOAT Ã  droite du gardien
            if (isMobile) rowDiv.appendChild(goatDiv);
            
        } else {
            // Autres lignes
            rows[i].forEach((pos, index) => {
                const posKey = `${i}-${index}`;
                const player = currentSquad.find(p => p.posKey === posKey);
                const card = createPlayerCard(pos, player, i, index);
                rowDiv.appendChild(card);
            });
        }
        field.appendChild(rowDiv);
    }

    // Sur Desktop : Coach et GOAT sont ajoutÃ©s directement au terrain (position absolute gÃ©rÃ©e par CSS)
    if (!isMobile) {
        field.appendChild(coachDiv);
        field.appendChild(goatDiv);
    }

    updateTeamNameDisplay();
}

// Fonction utilitaire pour Ã©viter de rÃ©pÃ©ter le code HTML des cartes
function createPlayerCard(pos, player, rowIndex, colIndex) {
    const card = document.createElement('div');
    card.className = player ? 'player-card filled' : 'player-card empty';
    card.innerHTML = player ? `
        <div class="player-position">${pos}</div>
        <div class="player-flag">${player.flag}</div>
        <div class="player-name">${player.name}</div>
        ${player.club ? `<div class="player-club">${player.club}</div>` : ''}
    ` : `
        <div class="empty-text">${pos}<br>+</div>
    `;
    card.onclick = () => openModal(pos, rowIndex, colIndex);
    return card;
}

// --- MODALS ET ACTIONS JOUEURS ---

function openModal(position, rowIndex, posIndex) {
    currentPosition = { position, posKey: `${rowIndex}-${posIndex}`, isGoat: false };
    document.getElementById('modalTitle').textContent = 'Ajouter un joueur';
    const player = currentSquad.find(p => p.posKey === currentPosition.posKey);
    
    // Reset inputs
    document.getElementById('playerName').value = player ? player.name : '';
    document.getElementById('playerFlag').value = player ? player.flag : 'ğŸ‡«ğŸ‡·';
    document.getElementById('playerClub').value = player ? (player.club || '') : '';
    document.getElementById('suggestions').innerHTML = ''; // Clear suggestions
    
    document.getElementById('modal').style.display = 'flex';
    document.getElementById('playerName').focus(); // Focus pour taper direct
}

function openGoatModal() {
    currentPosition = { isGoat: true };
    document.getElementById('modalTitle').textContent = 'ğŸ Choisir THE GOAT';
    document.getElementById('playerName').value = goat ? goat.name : '';
    document.getElementById('playerFlag').value = goat ? goat.flag : 'ğŸŒ';
    document.getElementById('playerClub').value = goat ? (goat.club || '') : '';
    document.getElementById('suggestions').innerHTML = '';
    document.getElementById('modal').style.display = 'flex';
}

function openCoachModal() {
    document.getElementById('coachModal').style.display = 'flex';
    if (coach) {
        document.getElementById('coachName').value = coach.name;
        document.getElementById('coachFlag').value = coach.flag;
    } else {
        document.getElementById('coachName').value = '';
        document.getElementById('coachFlag').value = 'ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿'; // Default
    }
}

function closeModal() { document.getElementById('modal').style.display = 'none'; }
function closeCoachModal() { document.getElementById('coachModal').style.display = 'none'; }

function addPlayer() {
    const name = document.getElementById('playerName').value.trim();
    const flag = document.getElementById('playerFlag').value;
    const club = document.getElementById('playerClub').value.trim();
    if (!name) return alert('Nom requis');

    if (currentPosition.isGoat) {
        goat = { name, flag, club: club || null };
    } else if (currentPosition.posKey) {
        // Supprime l'ancien joueur Ã  cette position s'il existe
        currentSquad = currentSquad.filter(p => p.posKey !== currentPosition.posKey);
        // Ajoute le nouveau
        currentSquad.push({ name, flag, club: club || null, posKey: currentPosition.posKey, position: currentPosition.position });
    }
    
    drawField(); // Redessine tout pour mettre Ã  jour l'interface
    closeModal();
}

function saveCoach() {
    const nameInput = document.getElementById('coachName').value.trim();
    const preset = document.getElementById('coachPreset').value;
    const name = nameInput || preset;
    
    const flag = document.getElementById('coachFlag').value;
    
    if (!name) return alert('Nom requis');
    
    coach = { name, flag };
    drawField(); // IMPORTANT : on redessine pour afficher le coach
    closeCoachModal();
}

// --- AUTOCOMPLETE / SUGGESTIONS ---

function showSuggestions() {
    const input = document.getElementById('playerName').value.trim().toLowerCase();
    const suggestionsDiv = document.getElementById('suggestions');

    if (input.length < 2) {
        suggestionsDiv.innerHTML = '';
        return;
    }

    // CORRECTION : Recherche plus large (insensible Ã  la casse dÃ©jÃ  gÃ©rÃ©e, mais sÃ©curisÃ©e)
    const results = playersDatabase
        .filter(p => p.name.toLowerCase().includes(input))
        .slice(0, 5); // Limite Ã  5 pour Ã©viter une liste trop longue sur mobile

    suggestionsDiv.innerHTML = '';

    results.forEach(player => {
        const item = document.createElement('div');
        item.className = 'suggestion-item';
        // Style inline pour l'exemple, idÃ©alement dans le CSS
        item.style.padding = "10px";
        item.style.cursor = "pointer";
        item.style.borderBottom = "1px solid #eee";
        item.style.background = "#fff";

        item.innerHTML = `
            <span style="font-size:1.2em; margin-right:10px;">${player.flag}</span>
            <span>${player.name}</span>
            <span style="font-size:0.8em; color:#666; margin-left:5px;">(${player.club})</span>
        `;

        item.onclick = () => selectSuggestion(player);
        suggestionsDiv.appendChild(item);
    });
}

function selectSuggestion(player) {
    document.getElementById('playerName').value = player.name;
    document.getElementById('playerFlag').value = player.flag;
    document.getElementById('playerClub').value = player.club || '';
    document.getElementById('suggestions').innerHTML = '';
}

// Fermer les suggestions si on clique ailleurs
document.addEventListener('click', (e) => {
    if (!e.target.closest('.form-group')) {
        document.getElementById('suggestions').innerHTML = '';
    }
});

// --- UI UTILS ---

function updateTeamNameDisplay() {
    const name = document.getElementById('teamName').value.trim();
    const display = document.getElementById('team-name-display');
    if (name) {
        display.textContent = name;
        display.classList.remove('hidden');
    } else {
        display.classList.add('hidden');
    }
}

function clearSquad() {
    if (confirm('RÃ©initialiser toute l\'Ã©quipe ?')) {
        currentSquad = [];
        coach = null;
        goat = null;
        document.getElementById('teamName').value = '';
        drawField();
    }
}

// --- EXPORT IMAGE (CORRIGÃ‰) ---

function exportAsImage() {
    const element = document.getElementById('export-area');
    const teamDisplay = document.getElementById('team-name-display');
    const watermark = document.querySelector('.watermark');
    const btn = document.querySelector('.btn-success');
    const originalText = btn.textContent;

    // 1. PrÃ©paration visuelle
    if(document.getElementById('teamName').value.trim()) {
        teamDisplay.classList.remove('hidden');
    }
    
    // On affiche le filigrane (il passera en 'flex' grÃ¢ce au CSS)
    if(watermark) watermark.style.display = 'flex';
    
    // Forcer la position relative pour que le filigrane s'appuie sur le cadre blanc
    element.style.position = 'relative';

    btn.textContent = 'â³ GÃ©nÃ©ration...';

    html2canvas(element, {
        scale: 2,
        backgroundColor: "#ffffff", // Force le fond blanc pour l'image
        useCORS: true,
        logging: false
    }).then(canvas => {
        // 2. Remise en Ã©tat de l'interface
        if(watermark) watermark.style.display = 'none';
        btn.textContent = originalText;

        const imgData = canvas.toDataURL('image/png');

        // 3. Affichage dans la modale
        const imgContainer = document.getElementById('imgResultContainer');
        imgContainer.innerHTML = ''; 
        const img = document.createElement('img');
        img.src = imgData;
        imgContainer.appendChild(img);

        // Configurer le tÃ©lÃ©chargement
        const downloadBtn = document.getElementById('downloadBtn');
        downloadBtn.href = imgData;
        downloadBtn.download = `Eleven-Squad.png`;

        document.getElementById('exportModal').style.display = 'flex';
    });
}
function closeExportModal() {
    document.getElementById('exportModal').style.display = 'none';
}

// Fermer la modale si on clique en dehors du contenu
document.getElementById('exportModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeExportModal();
    }
});
// Lancement au dÃ©marrage
drawField();

</script>
