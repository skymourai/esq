<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eleven Squad Builder</title>
<style>
/* Supprimer le soulignement des boutons liens */
.tab-link,
.tab-link:visited,
.tab-link:hover,
.tab-link:active {
    text-decoration: none;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
#export-area {
    padding: 10px;
}
    background: rgba(0,0,0,0.25);
    text-align: center;
    cursor: pointer;
}

.coach-card {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    font-weight: bold;
}

.coach-flag {
    font-size: 22px;
}

.coach-name {
    font-size: 16px;
}

.coach-empty {
    opacity: 0.7;
}


body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    padding: 20px;
}

.container { max-width: 1200px; margin: 0 auto; }

header {
    text-align: center;
    color: white;
    margin-bottom: 30px;
}

h1 {
    font-size: 2.5em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    margin-bottom: 10px;
}

.tabs {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.tab {
    background: rgba(255,255,255,0.2);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s;
}

.tab.active {
    background: white;
    color: #667eea;
    font-weight: bold;
}

.tab:hover { transform: translateY(-2px); }

.content { display: none; }
.content.active { display: block; }

.controls {
    background: rgba(255,255,255,0.95);
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
}

.control-group {
    display: flex;
    gap: 15px;
    align-items: center;
    flex-wrap: wrap;
    justify-content: center;
}

.control-group label {
    font-weight: bold;
    color: #333;
}

.control-group select, .control-group input {
    padding: 10px 15px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 16px;
    outline: none;
    transition: border 0.3s;
}

.control-group select:focus, .control-group input:focus {
    border-color: #667eea;
}

.btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: all 0.3s;
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}

.btn-secondary {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.btn-success {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
}

#field {
    background: linear-gradient(180deg, #2d5016 0%, #1a3a0f 100%);
    border-radius: 20px;
    padding: 30px 20px;
    position: relative;
    box-shadow: 0 15px 50px rgba(0,0,0,0.3);
    min-height: 600px;
}

#field::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 5%;
    right: 5%;
    height: 2px;
    background: rgba(255,255,255,0.3);
}

#field::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 120px;
    height: 120px;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 50%;
}

.row {
    display: flex;
    justify-content: space-around;
    margin: 20px 0;
    position: relative;
    z-index: 1;
}

.player-card {
    width: 90px;
    height: 120px;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    border-radius: 10px;
    padding: 8px;
    cursor: pointer;
    position: relative;
    transition: all 0.3s;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.player-card:hover {
    transform: translateY(-10px) scale(1.05);
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.player-card.filled {
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
}

.player-card.empty {
    border: 2px dashed rgba(255,255,255,0.4);
    background: rgba(255,255,255,0.1);
}

.player-position {
    font-size: 12px;
    font-weight: bold;
    color: #000;
    margin-bottom: 5px;
}

.player-flag {
    font-size: 24px;
    margin: 5px 0;
}

.player-name {
    font-size: 12px;
    font-weight: bold;
    color: #000;
    text-align: center;
    margin-top: 5px;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding: 0 5px;
}

.player-club {
    font-size: 9px;
    color: #333;
    margin-top: 2px;
}

.empty-text {
    color: rgba(255,255,255,0.6);
    font-size: 11px;
    font-weight: bold;
    text-align: center;
}

#modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    z-index: 1000;
    overflow-y: auto;
    padding: 20px;
}

.modal-content {
    background: white;
    max-width: 500px;
    margin: 50px auto;
    padding: 30px;
    border-radius: 20px;
    position: relative;
}

.close {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 30px;
    cursor: pointer;
    color: #999;
}

.close:hover { color: #333; }

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
    color: #333;
}

.form-group input, .form-group select {
    width: 100%;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 16px;
}

.suggestions {
    border: 1px solid #ddd;
    border-top: none;
    max-height: 200px;
    overflow-y: auto;
    background: white;
    border-radius: 0 0 8px 8px;
}

.suggestion-item {
    padding: 10px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.suggestion-item:hover {
    background: #f5f5f5;
}

.suggestion-flag {
    font-size: 20px;
}

.squad-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
}

.squad-card {
    background: white;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s;
}

.squad-card:hover {
    transform: translateY(-5px);
}

.squad-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.squad-name {
    font-size: 20px;
    font-weight: bold;
    color: #333;
}

.squad-formation {
    background: #667eea;
    color: white;
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 14px;
}

.squad-actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}

.btn-small {
    padding: 8px 16px;
    font-size: 14px;
}

@media (max-width: 768px) {
    .player-card {
        width: 70px;
        height: auto; /* ğŸ”‘ IMPORTANT */
        min-height: 105px;
    }

    .player-name {
        font-size: 10px;
        white-space: normal; /* ğŸ”‘ */
        overflow: visible;
        text-overflow: unset;
        line-height: 1.1;
        max-height: 2.2em; /* 2 lignes max */
    }
}
</style>
</head>
<body>

<div class="container">
    <header>
        <h1>âš½ Eleven Squad Builder</h1>
        <p>CrÃ©ez votre Ã©quipe de rÃªve - Toutes Ã©poques confondues. 
SÃ©lectionnez vos joueurs et votre coach, cliquez sur exporter, prenez une capture d'ecran et partagez votre "best team".
Merci de nous soutenir en suivant les liens affiliÃ© pour l'Academie BTC  </p>
    </header>

<div class="tabs">
    <button class="tab active" onclick="switchTab('builder')">ğŸ—ï¸ CrÃ©er</button>
    <button class="btn btn-secondary" onclick="enableBallonDorMode()">ğŸ† Ballon d'Or</button>
   

    <a class="tab tab-link" 
       href="https://soloist.ai/contribuablecaptif" 
       rel="noopener">
        ğŸ“ AcadÃ©mie
    </a>

    <a class="tab tab-link support" 
       href="https://gomining.com/?ref=YC98XHW"
       rel="noopener">
        â¤ï¸ Nous soutenir
    </a>
    <a class="tab tab-link" href="https://soloist.ai/contribuablecaptif#contact-1" target="_blank">ğŸ“© Contactez-nous</a>


</div>

    <div id="builder" class="content active">
        <div class="controls">
            <div class="control-group">
                <label>Nom de l'Ã©quipe:</label>
                <input type="text" id="teamName" placeholder="Mon Ã©quipe de lÃ©gende" />
                
                <label>Formation:</label>
                <select id="formation" onchange="drawField()">
                    <option value="3-1-4-2">3-1-4-2</option>
                    <option value="3-4-1-2">3-4-1-2</option>
                    <option value="3-4-2-1">3-4-2-1</option>
                    <option value="3-4-3">3-4-3</option>
                    <option value="3-5-2">3-5-2</option>
                    <option value="4-1-2-1-2">4-1-2-1-2</option>
                    <option value="4-1-3-2">4-1-3-2</option>
                    <option value="4-1-4-1">4-1-4-1</option>
                    <option value="4-2-1-3">4-2-1-3</option>
                    <option value="4-2-2-2">4-2-2-2</option>
                    <option value="4-2-3-1">4-2-3-1</option>
                    <option value="4-2-4">4-2-4</option>
                    <option value="4-3-1-2">4-3-1-2</option>
                    <option value="4-3-3">4-3-3</option>
                    <option value="4-4-2">4-4-2</option>
                    <option value="4-5-1">4-5-1</option>
                    <option value="5-2-1-2">5-2-1-2</option>
                    <option value="5-2-3">5-2-3</option>
                    <option value="5-3-2">5-3-2</option>
                    <option value="5-4-1">5-4-1</option>
                </select>
                
                <button class="btn btn-success" onclick="exportAsImage()">ğŸ“¸ Exporter</button>
                <button class="btn" onclick="clearSquad()">ğŸ—‘ï¸ RÃ©initialiser</button>
            </div>
        </div>

       <div id="export-area">
    <div id="field"></div>

    <div id="coach-area" class="coach-area" onclick="openCoachModal()">
        <div class="coach-empty">ğŸ‘” Ajouter un coach</div>
    </div>
</div>



    </div>

    <div id="mySquads" class="content">
        <div class="controls">
            <h2 style="text-align: center; margin-bottom: 20px;">Mes Ã‰quipes SauvegardÃ©es</h2>
        </div>
        <div id="squadsList" class="squad-list"></div>
    </div>

    <div id="community" class="content">
        <div class="controls">
            <h2 style="text-align: center; margin-bottom: 20px;">Ã‰quipes de la CommunautÃ©</h2>
            <p style="text-align: center; color: #666;">DÃ©couvrez les Ã©quipes crÃ©Ã©es par d'autres utilisateurs</p>
        </div>
        <div id="communityList" class="squad-list"></div>
    </div>
</div>

<div id="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>Ajouter un joueur</h2>
        
        <div class="form-group">
            <label>Nom du joueur</label>
            <input type="text" id="playerName" placeholder="Rechercher un joueur..." oninput="showSuggestions()" autocomplete="off" />
            <div id="suggestions" class="suggestions"></div>
        </div>

        <div class="form-group">
            <label>NationalitÃ©</label>
            <select id="playerFlag">
                <option value="ğŸ‡§ğŸ‡·">ğŸ‡§ğŸ‡· BrÃ©sil</option>
                <option value="ğŸ‡¦ğŸ‡·">ğŸ‡¦ğŸ‡· Argentine</option>
                <option value="ğŸ‡«ğŸ‡·">ğŸ‡«ğŸ‡· France</option>
                <option value="ğŸ‡µğŸ‡¹">ğŸ‡µğŸ‡¹ Portugal</option>
                <option value="ğŸ‡ªğŸ‡¸">ğŸ‡ªğŸ‡¸ Espagne</option>
                <option value="ğŸ‡©ğŸ‡ª">ğŸ‡©ğŸ‡ª Allemagne</option>
                <option value="ğŸ‡®ğŸ‡¹">ğŸ‡®ğŸ‡¹ Italie</option>
                <option value="ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿">ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Angleterre</option>
                <option value="ğŸ‡¨ğŸ‡®">ğŸ‡¨ğŸ‡® CÃ´te d'Ivoire</option>
                <option value="ğŸ‡­ğŸ‡·">ğŸ‡­ğŸ‡· Croatie</option>
                <option value="ğŸ‡³ğŸ‡±">ğŸ‡³ğŸ‡± Pays-Bas</option>
                <option value="ğŸ‡¨ğŸ‡¦">ğŸ‡¨ğŸ‡¦ Canada</option>
                <option value="ğŸ‡¯ğŸ‡µ">ğŸ‡¯ğŸ‡µ Japon</option>
                <option value="ğŸ‡ºğŸ‡¾">ğŸ‡ºğŸ‡¾ Uruguay</option>
                <option value="ğŸ‡§ğŸ‡ª">ğŸ‡§ğŸ‡ª Belgique</option>
                <option value="ğŸ‡²ğŸ‡½">ğŸ‡²ğŸ‡½ Mexique</option>
                <option value="ğŸ‡¨ğŸ‡±">ğŸ‡¨ğŸ‡± Chili</option>
                <option value="ğŸ‡¨ğŸ‡´">ğŸ‡¨ğŸ‡´ Colombie</option>
                <option value="ğŸ‡¸ğŸ‡ª">ğŸ‡¸ğŸ‡ª SuÃ¨de</option>
                <option value="ğŸ‡©ğŸ‡°">ğŸ‡©ğŸ‡° Danemark</option>
		<option value="ğŸŒ">ğŸŒ Reste du monde</option>
            </select>
        </div>

        <div class="form-group">
            <label>Club (optionnel)</label>
            <input type="text" id="playerClub" placeholder="Ex: Real Madrid" />
        </div>

        <button class="btn" style="width: 100%;" onclick="addPlayer()">Ajouter le joueur</button>
    </div>
</div>

<div id="coachModal" class="modal">
    <div class="modal-content">
        <h3>ğŸ‘” SÃ©lection du coach</h3>

        <select id="coachPreset">
            <option value="">-- Coach lÃ©gendaire --</option>
            <option>Pep Guardiola</option>
            <option>Sir Alex Ferguson</option>
            <option>Carlo Ancelotti</option>
            <option>JosÃ© Mourinho</option>
            <option>ZinÃ©dine Zidane</option>
            <option>ArsÃ¨ne Wenger</option>
            <option>JÃ¼rgen Klopp</option>
        </select>

        <input type="text" id="coachName" placeholder="Ou Ã©crire un coach" />

        <select id="coachFlag">
            <option value="ğŸ‡«ğŸ‡·">ğŸ‡«ğŸ‡· France</option>
            <option value="ğŸ‡ªğŸ‡¸">ğŸ‡ªğŸ‡¸ Espagne</option>
            <option value="ğŸ‡©ğŸ‡ª">ğŸ‡©ğŸ‡ª Allemagne</option>
            <option value="ğŸ‡®ğŸ‡¹">ğŸ‡®ğŸ‡¹ Italie</option>
            <option value="ğŸ‡µğŸ‡¹">ğŸ‡µğŸ‡¹ Portugal</option>
            <option value="ğŸŒ">ğŸŒ Reste du monde</option>
        </select>

        <div class="modal-actions">
            <button onclick="saveCoach()">âœ… Valider</button>
            <button onclick="closeCoachModal()">âŒ Annuler</button>
        </div>
    </div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
const formations = {
    '3-1-4-2': [ ['GK'], ['CB','CB','CB'], ['CDM'], ['LM','CM','CM','RM'], ['ST','ST'] ],
    '3-4-1-2': [ ['GK'], ['CB','CB','CB'], ['LM','CM','CM','RM'], ['CAM'], ['ST','ST'] ],
    '3-4-2-1': [ ['GK'], ['CB','CB','CB'], ['LM','CM','CM','RM'], ['CF','CF'], ['ST'] ],
    '3-4-3': [ ['GK'], ['CB','CB','CB'], ['LM','CM','CM','RM'], ['LW','ST','RW'] ],
    '3-5-2': [ ['GK'], ['CB','CB','CB'], ['LM','CM','CM','CM','RM'], ['ST','ST'] ],
    '4-1-2-1-2': [ ['GK'], ['LB','CB','CB','RB'], ['CDM'], ['CM','CM'], ['CAM'], ['ST','ST'] ],
    '4-1-3-2': [ ['GK'], ['LB','CB','CB','RB'], ['CDM'], ['LM','CM','RM'], ['ST','ST'] ],
    '4-1-4-1': [ ['GK'], ['LB','CB','CB','RB'], ['CDM'], ['LM','CM','CM','RM'], ['ST'] ],
    '4-2-1-3': [ ['GK'], ['LB','CB','CB','RB'], ['CDM','CDM'], ['CAM'], ['LW','ST','RW'] ],
    '4-2-2-2': [ ['GK'], ['LB','CB','CB','RB'], ['CDM','CDM'], ['CAM','CAM'], ['ST','ST'] ],
    '4-2-3-1': [ ['GK'], ['LB','CB','CB','RB'], ['CDM','CDM'], ['LM','CAM','RM'], ['ST'] ],
    '4-2-4': [ ['GK'], ['LB','CB','CB','RB'], ['CM','CM'], ['LW','RW','ST','ST'] ],
    '4-3-1-2': [ ['GK'], ['LB','CB','CB','RB'], ['CM','CM','CM'], ['CAM'], ['ST','ST'] ],
    '4-3-3': [ ['GK'], ['LB','CB','CB','RB'], ['CM','CM','CM'], ['LW','ST','RW'] ],
    '4-4-2': [ ['GK'], ['LB','CB','CB','RB'], ['LM','CM','CM','RM'], ['ST','ST'] ],
    '4-5-1': [ ['GK'], ['LB','CB','CB','RB'], ['LM','CM','CM','CM','RM'], ['ST'] ],
    '5-2-1-2': [ ['GK'], ['LB','CB','CB','CB','RB'], ['CM','CM'], ['CAM'], ['ST','ST'] ],
    '5-2-3': [ ['GK'], ['LB','CB','CB','CB','RB'], ['CM','CM'], ['LW','ST','RW'] ],
    '5-3-2': [ ['GK'], ['LB','CB','CB','CB','RB'], ['CM','CM','CM'], ['ST','ST'] ],
    '5-4-1': [ ['GK'], ['LB','CB','CB','CB','RB'], ['LM','CM','CM','RM'], ['ST'] ]
};

const playersDatabase = [
    // CHAMPIONS DU MONDE - ARGENTINE (1978, 1986, 2022)
    { name: 'Lionel Messi', flag: 'ğŸ‡¦ğŸ‡·', club: 'Inter Miami' },
    { name: 'Diego Maradona', flag: 'ğŸ‡¦ğŸ‡·', club: 'Napoli' },
    { name: 'Ãngel Di MarÃ­a', flag: 'ğŸ‡¦ğŸ‡·', club: 'Benfica' },
    { name: 'Enzo FernÃ¡ndez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Chelsea' },
    { name: 'Alexis Mac Allister', flag: 'ğŸ‡¦ğŸ‡·', club: 'Liverpool' },
    { name: 'Emiliano MartÃ­nez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Aston Villa' },
    { name: 'JuliÃ¡n Ãlvarez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Manchester City' },
    { name: 'Rodrigo De Paul', flag: 'ğŸ‡¦ğŸ‡·', club: 'AtlÃ©tico Madrid' },
    { name: 'NicolÃ¡s Otamendi', flag: 'ğŸ‡¦ğŸ‡·', club: 'Benfica' },
    { name: 'Cristian Romero', flag: 'ğŸ‡¦ğŸ‡·', club: 'Tottenham' },
    { name: 'Lisandro MartÃ­nez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Manchester United' },
    { name: 'Sergio AgÃ¼ero', flag: 'ğŸ‡¦ğŸ‡·', club: 'Manchester City' },
    { name: 'Javier Mascherano', flag: 'ğŸ‡¦ğŸ‡·', club: 'Barcelona' },
    { name: 'Gabriel Batistuta', flag: 'ğŸ‡¦ğŸ‡·', club: 'Fiorentina' },
    { name: 'Daniel Passarella', flag: 'ğŸ‡¦ğŸ‡·', club: 'River Plate' },
    { name: 'Mario Kempes', flag: 'ğŸ‡¦ğŸ‡·', club: 'Valencia' },
    { name: 'Osvaldo Ardiles', flag: 'ğŸ‡¦ğŸ‡·', club: 'Tottenham' },
    { name: 'Javier Zanetti', flag: 'ğŸ‡¦ğŸ‡·', club: 'Inter Milan' },
    { name: 'Juan RomÃ¡n Riquelme', flag: 'ğŸ‡¦ğŸ‡·', club: 'Boca Juniors' },
    { name: 'HernÃ¡n Crespo', flag: 'ğŸ‡¦ğŸ‡·', club: 'Chelsea' },
    { name: 'Carlos TÃ©vez', flag: 'ğŸ‡¦ğŸ‡·', club: 'Juventus' },
    { name: 'Gonzalo HiguaÃ­n', flag: 'ğŸ‡¦ğŸ‡·', club: 'Napoli' },
    { name: 'Alfredo Di StÃ©fano', flag: 'ğŸ‡¦ğŸ‡·', club: 'Real Madrid' },
    
    // CHAMPIONS DU MONDE - BRÃ‰SIL (1958, 1962, 1970, 1994, 2002)
    { name: 'PelÃ©', flag: 'ğŸ‡§ğŸ‡·', club: 'Santos' },
    { name: 'Ronaldo NazÃ¡rio', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Ronaldinho', flag: 'ğŸ‡§ğŸ‡·', club: 'Barcelona' },
    { name: 'RomÃ¡rio', flag: 'ğŸ‡§ğŸ‡·', club: 'Barcelona' },
    { name: 'Rivaldo', flag: 'ğŸ‡§ğŸ‡·', club: 'Barcelona' },
    { name: 'Cafu', flag: 'ğŸ‡§ğŸ‡·', club: 'AC Milan' },
    { name: 'Roberto Carlos', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Garrincha', flag: 'ğŸ‡§ğŸ‡·', club: 'Botafogo' },
    { name: 'Jairzinho', flag: 'ğŸ‡§ğŸ‡·', club: 'Botafogo' },
    { name: 'Carlos Alberto', flag: 'ğŸ‡§ğŸ‡·', club: 'Santos' },
    { name: 'Zico', flag: 'ğŸ‡§ğŸ‡·', club: 'Flamengo' },
    { name: 'SÃ³crates', flag: 'ğŸ‡§ğŸ‡·', club: 'Corinthians' },
    { name: 'Bebeto', flag: 'ğŸ‡§ğŸ‡·', club: 'Deportivo' },
    { name: 'Dunga', flag: 'ğŸ‡§ğŸ‡·', club: 'Stuttgart' },
    { name: 'KakÃ¡', flag: 'ğŸ‡§ğŸ‡·', club: 'AC Milan' },
    { name: 'Gilberto Silva', flag: 'ğŸ‡§ğŸ‡·', club: 'Arsenal' },
    { name: 'LÃºcio', flag: 'ğŸ‡§ğŸ‡·', club: 'Bayern Munich' },
    { name: 'Taffarel', flag: 'ğŸ‡§ğŸ‡·', club: 'Galatasaray' },
    { name: 'Dida', flag: 'ğŸ‡§ğŸ‡·', club: 'AC Milan' },
    { name: 'Neymar Jr', flag: 'ğŸ‡§ğŸ‡·', club: 'Al Hilal' },
    { name: 'Thiago Silva', flag: 'ğŸ‡§ğŸ‡·', club: 'Chelsea' },
    { name: 'Dani Alves', flag: 'ğŸ‡§ğŸ‡·', club: 'Barcelona' },
    { name: 'Marcelo', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Vinicius Jr', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Rodrygo', flag: 'ğŸ‡§ğŸ‡·', club: 'Real Madrid' },
    { name: 'Casemiro', flag: 'ğŸ‡§ğŸ‡·', club: 'Manchester United' },
    { name: 'Alisson Becker', flag: 'ğŸ‡§ğŸ‡·', club: 'Liverpool' },
    { name: 'Ederson', flag: 'ğŸ‡§ğŸ‡·', club: 'Manchester City' },
    { name: 'Fabinho', flag: 'ğŸ‡§ğŸ‡·', club: 'Liverpool' },
    
    // CHAMPIONS DU MONDE - FRANCE (1998, 2018)
    { name: 'Zinedine Zidane', flag: 'ğŸ‡«ğŸ‡·', club: 'Real Madrid' },
    { name: 'Kylian MbappÃ©', flag: 'ğŸ‡«ğŸ‡·', club: 'Real Madrid' },
    { name: 'Thierry Henry', flag: 'ğŸ‡«ğŸ‡·', club: 'Arsenal' },
    { name: 'Michel Platini', flag: 'ğŸ‡«ğŸ‡·', club: 'Juventus' },
    { name: 'Antoine Griezmann', flag: 'ğŸ‡«ğŸ‡·', club: 'AtlÃ©tico Madrid' },
    { name: 'NGolo KantÃ©', flag: 'ğŸ‡«ğŸ‡·', club: 'Chelsea' },
    { name: 'Paul Pogba', flag: 'ğŸ‡«ğŸ‡·', club: 'Juventus' },
    { name: 'RaphaÃ«l Varane', flag: 'ğŸ‡«ğŸ‡·', club: 'Manchester United' },
    { name: 'Hugo Lloris', flag: 'ğŸ‡«ğŸ‡·', club: 'Tottenham' },
    { name: 'Olivier Giroud', flag: 'ğŸ‡«ğŸ‡·', club: 'AC Milan' },
    { name: 'Patrick Vieira', flag: 'ğŸ‡«ğŸ‡·', club: 'Arsenal' },
    { name: 'Didier Deschamps', flag: 'ğŸ‡«ğŸ‡·', club: 'Juventus' },
    { name: 'Marcel Desailly', flag: 'ğŸ‡«ğŸ‡·', club: 'Chelsea' },
    { name: 'Lilian Thuram', flag: 'ğŸ‡«ğŸ‡·', club: 'Barcelona' },
    { name: 'Laurent Blanc', flag: 'ğŸ‡«ğŸ‡·', club: 'Manchester United' },
    { name: 'Fabien Barthez', flag: 'ğŸ‡«ğŸ‡·', club: 'Manchester United' },
    { name: 'Robert PirÃ¨s', flag: 'ğŸ‡«ğŸ‡·', club: 'Arsenal' },
    { name: 'Karim Benzema', flag: 'ğŸ‡«ğŸ‡·', club: 'Al Ittihad' },
    { name: 'Franck RibÃ©ry', flag: 'ğŸ‡«ğŸ‡·', club: 'Bayern Munich' },
    { name: 'Blaise Matuidi', flag: 'ğŸ‡«ğŸ‡·', club: 'Juventus' },
    { name: 'Theo HernÃ¡ndez', flag: 'ğŸ‡«ğŸ‡·', club: 'AC Milan' },
    { name: 'AurÃ©lien TchouamÃ©ni', flag: 'ğŸ‡«ğŸ‡·', club: 'Real Madrid' },
    { name: 'Eduardo Camavinga', flag: 'ğŸ‡«ğŸ‡·', club: 'Real Madrid' },
    { name: 'Kingsley Coman', flag: 'ğŸ‡«ğŸ‡·', club: 'Bayern Munich' },
    { name: 'Benjamin Pavard', flag: 'ğŸ‡«ğŸ‡·', club: 'Inter Milan' },
    { name: 'Lucas HernÃ¡ndez', flag: 'ğŸ‡«ğŸ‡·', club: 'PSG' },
    { name: 'Presnel Kimpembe', flag: 'ğŸ‡«ğŸ‡·', club: 'PSG' },
    { name: 'Samuel Umtiti', flag: 'ğŸ‡«ğŸ‡·', club: 'Lille' },
    
    // CHAMPIONS DU MONDE - ALLEMAGNE (1954, 1974, 1990, 2014)
    { name: 'Franz Beckenbauer', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Gerd MÃ¼ller', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Lothar MatthÃ¤us', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Philipp Lahm', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Bastian Schweinsteiger', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Manuel Neuer', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Toni Kroos', flag: 'ğŸ‡©ğŸ‡ª', club: 'Real Madrid' },
    { name: 'Mesut Ã–zil', flag: 'ğŸ‡©ğŸ‡ª', club: 'Real Madrid' },
    { name: 'Thomas MÃ¼ller', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Marco Reus', flag: 'ğŸ‡©ğŸ‡ª', club: 'Borussia Dortmund' },
    { name: 'Mats Hummels', flag: 'ğŸ‡©ğŸ‡ª', club: 'Borussia Dortmund' },
    { name: 'JÃ©rÃ´me Boateng', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Sami Khedira', flag: 'ğŸ‡©ğŸ‡ª', club: 'Juventus' },
    { name: 'Miroslav Klose', flag: 'ğŸ‡©ğŸ‡ª', club: 'Lazio' },
    { name: 'JÃ¼rgen Klinsmann', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Oliver Kahn', flag: 'ğŸ‡©ğŸ‡ª', club: 'Bayern Munich' },
    { name: 'Michael Ballack', flag: 'ğŸ‡©ğŸ‡ª', club: 'Chelsea' },
    { name: 'Matthias Sammer', flag: 'ğŸ‡©ğŸ‡ª', club: 'Borussia Dortmund' },
    { name: 'Rudi VÃ¶ller', flag: 'ğŸ‡©ğŸ‡ª', club: 'Roma' },
    { name: 'Andreas Brehme', flag: 'ğŸ‡©ğŸ‡ª', club: 'Inter Milan' },
    
    // CHAMPIONS DU MONDE - ITALIE (1934, 1938, 1982, 2006)
    { name: 'Paolo Maldini', flag: 'ğŸ‡®ğŸ‡¹', club: 'AC Milan' },
    { name: 'Gianluigi Buffon', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Andrea Pirlo', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Alessandro Del Piero', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Francesco Totti', flag: 'ğŸ‡®ğŸ‡¹', club: 'AS Roma' },
    { name: 'Giorgio Chiellini', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Leonardo Bonucci', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Gianluigi Donnarumma', flag: 'ğŸ‡®ğŸ‡¹', club: 'PSG' },
    { name: 'Marco Verratti', flag: 'ğŸ‡®ğŸ‡¹', club: 'Al Arabi' },
    { name: 'Fabio Cannavaro', flag: 'ğŸ‡®ğŸ‡¹', club: 'Real Madrid' },
    { name: 'Dino Zoff', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Roberto Baggio', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Franco Baresi', flag: 'ğŸ‡®ğŸ‡¹', club: 'AC Milan' },
    { name: 'Giuseppe Meazza', flag: 'ğŸ‡®ğŸ‡¹', club: 'Inter Milan' },
    { name: 'Luigi Riva', flag: 'ğŸ‡®ğŸ‡¹', club: 'Cagliari' },
    { name: 'Paolo Rossi', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Marco Tardelli', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    { name: 'Alessandro Nesta', flag: 'ğŸ‡®ğŸ‡¹', club: 'AC Milan' },
    { name: 'Marco Materazzi', flag: 'ğŸ‡®ğŸ‡¹', club: 'Inter Milan' },
    { name: 'Daniele De Rossi', flag: 'ğŸ‡®ğŸ‡¹', club: 'AS Roma' },
    { name: 'Gennaro Gattuso', flag: 'ğŸ‡®ğŸ‡¹', club: 'AC Milan' },
    { name: 'Mauro Camoranesi', flag: 'ğŸ‡®ğŸ‡¹', club: 'Juventus' },
    
    // CHAMPIONS DU MONDE - ESPAGNE (2010)
    { name: 'Iker Casillas', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Madrid' },
    { name: 'Xavi HernÃ¡ndez', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'AndrÃ©s Iniesta', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Sergio Ramos', flag: 'ğŸ‡ªğŸ‡¸', club: 'Sevilla' },
    { name: 'Sergio Busquets', flag: 'ğŸ‡ªğŸ‡¸', club: 'Inter Miami' },
    { name: 'Carles Puyol', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Gerard PiquÃ©', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Fernando Torres', flag: 'ğŸ‡ªğŸ‡¸', club: 'Liverpool' },
    { name: 'David Villa', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'RaÃºl GonzÃ¡lez', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Madrid' },
    { name: 'David Silva', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Sociedad' },
    { name: 'Cesc FÃ bregas', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Xabi Alonso', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Madrid' },
    { name: 'Emilio ButragueÃ±o', flag: 'ğŸ‡ªğŸ‡¸', club: 'Real Madrid' },
    { name: 'Luis Enrique', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Jordi Alba', flag: 'ğŸ‡ªğŸ‡¸', club: 'Barcelona' },
    { name: 'Pedro RodrÃ­guez', flag: 'ğŸ‡ªğŸ‡¸', club: 'Chelsea' },
    { name: 'Juan Mata', flag: 'ğŸ‡ªğŸ‡¸', club: 'Manchester United' },
    
    // CHAMPIONS D'EUROPE - ANGLETERRE (Ligue des Champions)
    { name: 'Bobby Charlton', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'George Best', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'David Beckham', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Ryan Giggs', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Paul Scholes', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Roy Keane', flag: 'ğŸ‡®ğŸ‡ª', club: 'Manchester United' },
    { name: 'Steven Gerrard', flag: 'ğŸ´', club: 'Liverpool' },
    { name: 'Frank Lampard', flag: 'ğŸ´', club: 'Chelsea' },
    { name: 'John Terry', flag: 'ğŸ´', club: 'Chelsea' },
    { name: 'Didier Drogba', flag: 'ğŸ‡¨ğŸ‡®', club: 'Chelsea' },
    { name: 'Wayne Rooney', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Rio Ferdinand', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Ashley Cole', flag: 'ğŸ´', club: 'Chelsea' },
    { name: 'Gary Neville', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Peter Schmeichel', flag: 'ğŸ‡©ğŸ‡°', club: 'Manchester United' },
    { name: 'Edwin van der Sar', flag: 'ğŸ‡³ğŸ‡±', club: 'Manchester United' },
    { name: 'Harry Kane', flag: 'ğŸ´', club: 'Bayern Munich' },
    { name: 'Jude Bellingham', flag: 'ğŸ´', club: 'Real Madrid' },
    { name: 'Phil Foden', flag: 'ğŸ´', club: 'Manchester City' },
    { name: 'Bukayo Saka', flag: 'ğŸ´', club: 'Arsenal' },
    { name: 'Declan Rice', flag: 'ğŸ´', club: 'Arsenal' },
    { name: 'Raheem Sterling', flag: 'ğŸ´', club: 'Chelsea' },
    { name: 'Marcus Rashford', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Jadon Sancho', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Mason Mount', flag: 'ğŸ´', club: 'Manchester United' },
    { name: 'Jack Grealish', flag: 'ğŸ´', club: 'Manchester City' },
    { name: 'Jamie Carragher', flag: 'ğŸ´', club: 'Liverpool' },
    { name: 'Michael Owen', flag: 'ğŸ´', club: 'Liverpool' },
    { name: 'Robbie Fowler', flag: 'ğŸ´', club: 'Liverpool' },
    
    // CHAMPIONS D'EUROPE - PORTUGAL
    { name: 'Cristiano Ronaldo', flag: 'ğŸ‡µğŸ‡¹', club: 'Al Nassr' },
    { name: 'Luis Figo', flag: 'ğŸ‡µğŸ‡¹', club: 'Real Madrid' },
    { name: 'EusÃ©bio', flag: 'ğŸ‡µğŸ‡¹', club: 'Benfica' },
    { name: 'Rui Costa', flag: 'ğŸ‡µğŸ‡¹', club: 'AC Milan' },
    { name: 'Deco', flag: 'ğŸ‡µğŸ‡¹', club: 'Barcelona' },
    { name: 'Ricardo Carvalho', flag: 'ğŸ‡µğŸ‡¹', club: 'Chelsea' },
    { name: 'Pepe', flag: 'ğŸ‡µğŸ‡¹', club: 'Real Madrid' },
    { name: 'Bruno Fernandes', flag: 'ğŸ‡µğŸ‡¹', club: 'Manchester United' },
    { name: 'Bernardo Silva', flag: 'ğŸ‡µğŸ‡¹', club: 'Manchester City' },
    { name: 'JoÃ£o FÃ©lix', flag: 'ğŸ‡µğŸ‡¹', club: 'Barcelona' },
    { name: 'Rafael LeÃ£o', flag: 'ğŸ‡µğŸ‡¹', club: 'AC Milan' },
    { name: 'Diogo Jota', flag: 'ğŸ‡µğŸ‡¹', club: 'Liverpool' },
    { name: 'RÃºben Dias', flag: 'ğŸ‡µğŸ‡¹', club: 'Manchester City' },
    { name: 'JoÃ£o Cancelo', flag: 'ğŸ‡µğŸ‡¹', club: 'Barcelona' },
    
    // CHAMPIONS D'EUROPE - PAYS-BAS
    { name: 'Johan Cruyff', flag: 'ğŸ‡³ğŸ‡±', club: 'Ajax' },
    { name: 'Marco van Basten', flag: 'ğŸ‡³ğŸ‡±', club: 'AC Milan' },
    { name: 'Ruud Gullit', flag: 'ğŸ‡³ğŸ‡±', club: 'AC Milan' },
    { name: 'Frank Rijkaard', flag: 'ğŸ‡³ğŸ‡±', club: 'AC Milan' },
    { name: 'Dennis Bergkamp', flag: 'ğŸ‡³ğŸ‡±', club: 'Arsenal' },
    { name: 'Clarence Seedorf', flag: 'ğŸ‡³ğŸ‡±', club: 'AC Milan' },
    { name: 'Wesley Sneijder', flag: 'ğŸ‡³ğŸ‡±', club: 'Inter Milan' },
    { name: 'Arjen Robben', flag: 'ğŸ‡³ğŸ‡±', club: 'Bayern Munich' },
    { name: 'Robin van Persie', flag: 'ğŸ‡³ğŸ‡±', club: 'Arsenal' },
    { name: 'Ruud van Nistelrooy', flag: 'ğŸ‡³ğŸ‡±', club: 'Manchester United' },
    { name: 'Virgil van Dijk', flag: 'ğŸ‡³ğŸ‡±', club: 'Liverpool' },
    { name: 'Matthijs de Ligt', flag: 'ğŸ‡³ğŸ‡±', club: 'Bayern Munich' },
    { name: 'Frenkie de Jong', flag: 'ğŸ‡³ğŸ‡±', club: 'Barcelona' },
    
    // CHAMPIONS D'EUROPE - AUTRES NATIONS
    { name: 'Luka ModriÄ‡', flag: 'ğŸ‡­ğŸ‡·', club: 'Real Madrid' },
    { name: 'Ivan RakitiÄ‡', flag: 'ğŸ‡­ğŸ‡·', club: 'Barcelona' },
    { name: 'Zvonimir Boban', flag: 'ğŸ‡­ğŸ‡·', club: 'AC Milan' },
    { name: 'Davor Å uker', flag: 'ğŸ‡­ğŸ‡·', club: 'Real Madrid' },
    { name: 'Mateo KovaÄiÄ‡', flag: 'ğŸ‡­ğŸ‡·', club: 'Chelsea' },
    { name: 'JoÅ¡ko Gvardiol', flag: 'ğŸ‡­ğŸ‡·', club: 'Manchester City' },
    { name: 'Luis SuÃ¡rez', flag: 'ğŸ‡ºğŸ‡¾', club: 'Gremio' },
    { name: 'Edinson Cavani', flag: 'ğŸ‡ºğŸ‡¾', club: 'Valencia' },
    { name: 'Diego ForlÃ¡n', flag: 'ğŸ‡ºğŸ‡¾', club: 'AtlÃ©tico Madrid' },
    { name: 'Federico Valverde', flag: 'ğŸ‡ºğŸ‡¾', club: 'Real Madrid' },
    { name: 'Darwin NÃºÃ±ez', flag: 'ğŸ‡ºğŸ‡¾', club: 'Liverpool' },
    { name: 'Kevin De Bruyne', flag: 'ğŸ‡§ğŸ‡ª', club: 'Manchester City' },
    { name: 'Eden Hazard', flag: 'ğŸ‡§ğŸ‡ª', club: 'Chelsea' },
    { name: 'Thibaut Courtois', flag: 'ğŸ‡§ğŸ‡ª', club: 'Real Madrid' },
    { name: 'Romelu Lukaku', flag: 'ğŸ‡§ğŸ‡ª', club: 'Inter Milan' },
    { name: 'Vincent Kompany', flag: 'ğŸ‡§ğŸ‡ª', club: 'Manchester City' },
    { name: 'Alexis SÃ¡nchez', flag: 'ğŸ‡¨ğŸ‡±', club: 'Inter Milan' },
    { name: 'Arturo Vidal', flag: 'ğŸ‡¨ğŸ‡±', club: 'Flamengo' },
    { name: 'James RodrÃ­guez', flag: 'ğŸ‡¨ğŸ‡´', club: 'SÃ£o Paulo' },
    { name: 'Radamel Falcao', flag: 'ğŸ‡¨ğŸ‡´', club: 'Millonarios' },
    { name: 'Luis DÃ­az', flag: 'ğŸ‡¨ğŸ‡´', club: 'Liverpool' },
    { name: 'Samuel Eto\'o', flag: 'ğŸ‡¨ğŸ‡²', club: 'Barcelona' },
    { name: 'George Weah', flag: 'ğŸ‡±ğŸ‡·', club: 'AC Milan' },
    { name: 'Yaya TourÃ©', flag: 'ğŸ‡¨ğŸ‡®', club: 'Barcelona' },
    { name: 'Sadio ManÃ©', flag: 'ğŸ‡¸ğŸ‡³', club: 'Al Nassr' },
    { name: 'Mohamed Salah', flag: 'ğŸ‡ªğŸ‡¬', club: 'Liverpool' },
    { name: 'Riyad Mahrez', flag: 'ğŸ‡©ğŸ‡¿', club: 'Al Ahli' },
    { name: 'Victor Osimhen', flag: 'ğŸ‡³ğŸ‡¬', club: 'Napoli' },
    { name: 'Achraf Hakimi', flag: 'ğŸ‡²ğŸ‡¦', club: 'PSG' },
    { name: 'Heung-Min Son', flag: 'ğŸ‡°ğŸ‡·', club: 'Tottenham' },
    { name: 'Park Ji-Sung', flag: 'ğŸ‡°ğŸ‡·', club: 'Manchester United' },
    { name: 'Zlatan IbrahimoviÄ‡', flag: 'ğŸ‡¸ğŸ‡ª', club: 'AC Milan' },
    { name: 'Henrik Larsson', flag: 'ğŸ‡¸ğŸ‡ª', club: 'Barcelona' },
    { name: 'Erling Haaland', flag: 'ğŸ‡³ğŸ‡´', club: 'Manchester City' },
    { name: 'Martin Ã˜degaard', flag: 'ğŸ‡³ğŸ‡´', club: 'Arsenal' },
    { name: 'Christian Eriksen', flag: 'ğŸ‡©ğŸ‡°', club: 'Manchester United' },
    { name: 'Pavel NedvÄ›d', flag: 'ğŸ‡¨ğŸ‡¿', club: 'Juventus' },
    { name: 'Andriy Shevchenko', flag: 'ğŸ‡ºğŸ‡¦', club: 'AC Milan' },
    { name: 'Robert Lewandowski', flag: 'ğŸ‡µğŸ‡±', club: 'Barcelona' },
    { name: 'Gareth Bale', flag: 'ğŸ´', club: 'Real Madrid' },
    { name: 'Gheorghe Hagi', flag: 'ğŸ‡·ğŸ‡´', club: 'Galatasaray' }
];
let currentPosition = null;
let ballonDorMode = false;
let coach = null;
let currentSquad = [];
let savedSquads = [];

function initStorage() {
    const stored = localStorage.getItem('elevenSquads');
    if (stored) {
        savedSquads = JSON.parse(stored);
    }
}
function openCoachModal() {
    document.getElementById('coachModal').style.display = 'flex';
}

function closeCoachModal() {
    document.getElementById('coachModal').style.display = 'none';
}
function saveCoach() {
    const preset = document.getElementById('coachPreset').value;
    const nameInput = document.getElementById('coachName').value;
    const flag = document.getElementById('coachFlag').value;

    const name = nameInput || preset;

    if (!name) {
        alert("Veuillez sÃ©lectionner ou saisir un coach");
        return;
    }

    coach = { name, flag };

    document.getElementById('coach-area').innerHTML = `
        <div class="coach-card">
            <div class="coach-flag">${flag}</div>
            <div class="coach-name">${name}</div>
        </div>
    `;

    closeCoachModal();
}


function switchTab(tabName) {
    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.content').forEach(content => content.classList.remove('active'));
    ballonDorMode = false;

    
    event.target.classList.add('active');
    document.getElementById(tabName).classList.add('active');
    
    if (tabName === 'mySquads') {
        displayMySquads();
    } else if (tabName === 'community') {
        displayCommunitySquads();
    }
}
function drawBallonDorField() {
    const field = document.getElementById('field');
    field.innerHTML = '';

    const row = document.createElement('div');
    row.className = 'row';

    const card = document.createElement('div');
    card.className = 'player-card empty';
    card.innerHTML = `<div class="empty-text">ğŸ†<br>Ballon d'Or</div>`;

    card.onclick = () => openModal('Ballon dâ€™Or', 0, 0);

    row.appendChild(card);
    field.appendChild(row);
}

function enableBallonDorMode() {
    ballonDorMode = true;
    currentSquad = [];
    document.getElementById('formation').value = '4-3-3';
    drawBallonDorField();

    alert("ğŸ† Mode Ballon d'Or activÃ©\n\nSÃ©lectionnez UN SEUL joueur : le meilleur de tous les temps. Le GOAT.");
}

function drawField() {
    if (ballonDorMode) {
        drawBallonDorField();
        return;
    }

    const field = document.getElementById('field');
    field.innerHTML = '';
    const formation = document.getElementById('formation').value;
    const rows = formations[formation];

    for (let i = rows.length - 1; i >= 0; i--) {
        const rowDiv = document.createElement('div');
        rowDiv.className = 'row';
        const positions = rows[i];

        positions.forEach((pos, index) => {
            const cardDiv = document.createElement('div');
            const posKey = `${i}-${index}`;
            const player = currentSquad.find(p => p.posKey === posKey);

            if (player) {
                cardDiv.className = 'player-card filled';
                cardDiv.innerHTML = `
                    <div class="player-position">${pos}</div>
                    <div class="player-flag">${player.flag}</div>
                    <div class="player-name">${player.name}</div>
                    ${player.club ? `<div class="player-club">${player.club}</div>` : ''}
                `;
            } else {
                cardDiv.className = 'player-card empty';
                cardDiv.innerHTML = `<div class="empty-text">${pos}<br>+</div>`;
            }

            cardDiv.onclick = () => openModal(pos, i, index);
            rowDiv.appendChild(cardDiv);
        });

        field.appendChild(rowDiv);
    }
}

function openModal(position, rowIndex, posIndex) {
    currentPosition = { position, posKey: `${rowIndex}-${posIndex}` };
    const existingPlayer = currentSquad.find(p => p.posKey === currentPosition.posKey);
    
    if (existingPlayer) {
        document.getElementById('playerName').value = existingPlayer.name;
        document.getElementById('playerFlag').value = existingPlayer.flag;
        document.getElementById('playerClub').value = existingPlayer.club || '';
    } else {
        document.getElementById('playerName').value = '';
        document.getElementById('playerFlag').value = 'ğŸ‡§ğŸ‡·';
        document.getElementById('playerClub').value = '';
    }
    
    document.getElementById('modal').style.display = 'block';
    document.getElementById('playerName').focus();
}

function closeModal() {
    document.getElementById('modal').style.display = 'none';
    document.getElementById('suggestions').innerHTML = '';
}

function showSuggestions() {
    const input = document.getElementById('playerName').value.toLowerCase();
    const suggestionsDiv = document.getElementById('suggestions');
    
    if (input.length < 2) {
        suggestionsDiv.innerHTML = '';
        return;
    }
    
    const filtered = playersDatabase.filter(player => 
        player.name.toLowerCase().includes(input)
    ).slice(0, 10);
    
    suggestionsDiv.innerHTML = filtered.map(player => 
        `<div class="suggestion-item" onclick='selectSuggestion(${JSON.stringify(player)})'>
            <span>${player.name}</span>
            <span class="suggestion-flag">${player.flag}</span>
        </div>`
    ).join('');
}

function selectSuggestion(player) {
    document.getElementById('playerName').value = player.name;
    document.getElementById('playerFlag').value = player.flag;
    document.getElementById('playerClub').value = player.club;
    document.getElementById('suggestions').innerHTML = '';
}
function addPlayer() {
    const name = document.getElementById('playerName').value;
    const flag = document.getElementById('playerFlag').value;
    const club = document.getElementById('playerClub').value;

    if (!name) {
        alert('Veuillez entrer un nom de joueur');
        return;
    }

    if (ballonDorMode) {
        currentSquad = [];
    }

    const player = {
        name,
        flag,
        club,
        position: currentPosition.position,
        posKey: currentPosition.posKey
    };

    currentSquad = currentSquad.filter(p => p.posKey !== currentPosition.posKey);
    currentSquad.push(player);

    closeModal();
    drawField();
}

function saveSquad() {
    const teamName = document.getElementById('teamName').value || 'Mon Ã©quipe';
    const formation = document.getElementById('formation').value;
    
    if (currentSquad.length === 0) {
        alert('Ajoutez au moins un joueur avant de sauvegarder');
        return;
    }
    
    const squad = {
        id: Date.now(),
        name: teamName,
        formation,
        players: [...currentSquad],
        createdAt: new Date().toISOString()
    };
    
    savedSquads.push(squad);
    localStorage.setItem('elevenSquads', JSON.stringify(savedSquads));
    
    alert('âœ… Ã‰quipe sauvegardÃ©e avec succÃ¨s !');
}

function shareSquad() {
    const teamName = document.getElementById('teamName').value || 'Mon Ã©quipe';
    
    if (currentSquad.length === 0) {
        alert('Ajoutez au moins un joueur avant de partager');
        return;
    }
    
    const sharedSquads = JSON.parse(localStorage.getItem('sharedSquads') || '[]');
    const squad = {
        id: Date.now(),
        name: teamName,
        formation: document.getElementById('formation').value,
        players: [...currentSquad],
        author: 'Utilisateur',
        likes: 0,
        createdAt: new Date().toISOString()
    };
    
    sharedSquads.push(squad);
    localStorage.setItem('sharedSquads', JSON.stringify(sharedSquads));
    
    alert('âœ… Ã‰quipe partagÃ©e avec la communautÃ© !');
}

function clearSquad() {
    if (confirm('Voulez-vous vraiment rÃ©initialiser l\'Ã©quipe ?')) {
        currentSquad = [];
        drawField();
    }
}

async function exportAsImage() {
    const exportArea = document.getElementById('export-area');
    const coachArea = document.getElementById('coach-area');

    if (currentSquad.length === 0) {
        alert("Ajoutez au moins un joueur avant d'exporter");
        return;
    }

    // ğŸ”’ DÃ©sactiver interaction
    coachArea.style.pointerEvents = 'none';

    try {
        const canvas = await html2canvas(exportArea, {
            backgroundColor: '#2d5016',
            scale: 2,
            useCORS: true
        });

        const imageData = canvas.toDataURL('image/png');
        openImagePage(imageData);

    } catch (error) {
        console.error(error);
        alert("Erreur lors de l'export");
    } finally {
        // ğŸ”“ RÃ©activer interaction
        coachArea.style.pointerEvents = 'auto';
    }
}

function openImagePage(imageSrc) {
    const win = window.open('', '_blank');

    win.document.write(`
        <!DOCTYPE html>
        <html lang="fr">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Mon Ã©quipe</title>
            <style>
                body {
                    margin: 0;
                    background: #000;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                }
                img {
                    max-width: 100%;
                    height: auto;
                }
            </style>
        </head>
        <body>
            <img src="${imageSrc}" alt="Ã‰quipe">
        </body>
        </html>
    `);

    win.document.close();
}

function displayMySquads() {
    const container = document.getElementById('squadsList');
    
    if (savedSquads.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #666;">Aucune Ã©quipe sauvegardÃ©e</p>';
        return;
    }
    
    container.innerHTML = savedSquads.map(squad => `
        <div class="squad-card">
            <div class="squad-header">
                <div class="squad-name">${squad.name}</div>
                <div class="squad-formation">${squad.formation}</div>
            </div>
            <p style="color: #666; font-size: 14px;">
                ${squad.players.length} joueurs
            </p>
            <div class="squad-actions">
                <button class="btn btn-small" onclick="loadSquad(${squad.id})">Charger</button>
                <button class="btn btn-small btn-secondary" onclick="deleteSquad(${squad.id})">Supprimer</button>
            </div>
        </div>
    `).join('');
}

function displayCommunitySquads() {
    const container = document.getElementById('communityList');
    const sharedSquads = JSON.parse(localStorage.getItem('sharedSquads') || '[]');
    
    if (sharedSquads.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: #666;">Aucune Ã©quipe partagÃ©e pour le moment</p>';
        return;
    }
    
    container.innerHTML = sharedSquads.map(squad => `
        <div class="squad-card">
            <div class="squad-header">
                <div class="squad-name">${squad.name}</div>
                <div class="squad-formation">${squad.formation}</div>
            </div>
            <p style="color: #666; font-size: 14px;">
                Par ${squad.author} â€¢ ${squad.players.length} joueurs â€¢ â¤ï¸ ${squad.likes}
            </p>
            <div class="squad-actions">
                <button class="btn btn-small" onclick="likeSquad(${squad.id})">â¤ï¸ J'aime</button>
            </div>
        </div>
    `).join('');
}

function loadSquad(id) {
    const squad = savedSquads.find(s => s.id === id);
    if (squad) {
        currentSquad = [...squad.players];
        document.getElementById('teamName').value = squad.name;
        document.getElementById('formation').value = squad.formation;
        switchTab('builder');
        document.querySelector('.tab').click();
        drawField();
    }
}

function deleteSquad(id) {
    if (confirm('Voulez-vous vraiment supprimer cette Ã©quipe ?')) {
        savedSquads = savedSquads.filter(s => s.id !== id);
        localStorage.setItem('elevenSquads', JSON.stringify(savedSquads));
        displayMySquads();
    }
}

function likeSquad(id) {
    const sharedSquads = JSON.parse(localStorage.getItem('sharedSquads') || '[]');
    const squad = sharedSquads.find(s => s.id === id);
    if (squad) {
        squad.likes++;
        localStorage.setItem('sharedSquads', JSON.stringify(sharedSquads));
        displayCommunitySquads();
    }
}

window.onclick = function(event) {
    if (event.target == document.getElementById('modal')) {
        closeModal();
    }
}

initStorage();
drawField();
</script>

</body>
</html>
